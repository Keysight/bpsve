{
    "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {
		"IxiaImagesResourceGroupName": {
			"defaultValue": "Ixia_Images_RG",
			"type": "String"
		},
		"VnetName": {
			"defaultValue": "KEY02_BPS_AZURE_VNET",
			"type": "String"
		},
        "MgmtSubnetName": {
			"defaultValue": "KEY02_BPS_AZURE_VNET_MGMT_SUBNET",
			"type": "String"
		},
        "Test1SubnetName": {
			"defaultValue": "KEY02_BPS_AZURE_VNET_TEST1_SUBNET",
			"type": "String"
		},
        "Test2SubnetName": {
			"defaultValue": "KEY02_BPS_AZURE_VNET_TEST2_SUBNET",
			"type": "String"
		},
        "MgmtSecurityRuleSourceIpPrefix": {
			"defaultValue": "42.42.42.42/32",
			"type": "String"
		},
        "BpsSystemControllerImageName": {
			"defaultValue": "Ixia_BreakingPoint_Virtual_Controller_10.00",
			"type": "String"
		},
        "BpsSystemControllerVmSize": {
			"defaultValue": "Standard_F4s",
			"type": "String",
			"allowedValues": [
				"Standard_F4s",
				"Standard_F4s_v2"
			]
		},
		"BpsVirtualBlade1Eth0IpAddress": { 
			"defaultValue": "10.0.10.13",
			"type": "String"
		},
		"BpsVirtualBlade1Eth1IpAddresses": {
			"defaultValue": ["10.0.2.22", "10.0.2.23", "10.0.2.24", "10.0.2.25", "10.0.2.26", "10.0.2.27", "10.0.2.28", "10.0.2.29", "10.0.2.30", "10.0.2.31"]
			"type": "Array"
		},
		"BpsVirtualBlade1Eth2IpAddresses": {
			"defaultValue": ["10.0.3.22", "10.0.3.23", "10.0.3.24", "10.0.3.25", "10.0.3.26", "10.0.3.27", "10.0.3.28", "10.0.3.29", "10.0.3.30", "10.0.3.31"]		
			"type": "Array"
		},
		"BpsVirtualBlade2Eth0IpAddress": {
			"defaultValue": "10.0.1.14",
		},
		"BpsVirtualBlade2Eth1IpAddresses": {
			"defaultValue": ["10.0.2.32", "10.0.2.33", "10.0.2.34", "10.0.2.35", "10.0.2.36", "10.0.2.37", "10.0.2.38", "10.0.2.39", "10.0.2.40", "10.0.2.41"]
		},
		"BpsVirtualBlade2Eth2IpAddresses": {
			"defaultValue": ["10.0.3.32", "10.0.3.33", "10.0.3.34", "10.0.3.35", "10.0.3.36", "10.0.3.37", "10.0.3.38", "10.0.3.39", "10.0.3.40", "10.0.3.41"]
		},
		"BpsVirtualBlade3Eth0IpAddress": {
			"defaultValue": "10.0.1.15",
		},
		"BpsVirtualBlade3Eth1IpAddresses": {
			"defaultValue": ["10.0.2.42", "10.0.2.43", "10.0.2.44", "10.0.2.45", "10.0.2.46", "10.0.2.47", "10.0.2.48", "10.0.2.49", "10.0.2.50", "10.0.2.51"]
		},
		"BpsVirtualBlade3Eth2IpAddresses": {
			"defaultValue": ["10.0.3.42", "10.0.3.43", "10.0.3.44", "10.0.3.45", "10.0.3.46", "10.0.3.47", "10.0.3.48", "10.0.3.49", "10.0.3.50", "10.0.3.51"]
		},
		"BpsVirtualBlade4Eth0IpAddress": {
			"defaultValue": "10.0.1.16",
		},
		"BpsVirtualBlade4Eth1IpAddresses": {
			"defaultValue": ["10.0.2.52", "10.0.2.53", "10.0.2.54", "10.0.2.55", "10.0.2.56", "10.0.2.57", "10.0.2.58", "10.0.2.59", "10.0.2.60", "10.0.2.61"]
		},
		"BpsVirtualBlade4Eth2IpAddresses": {
			"defaultValue": ["10.0.3.52", "10.0.3.53", "10.0.3.54", "10.0.3.55", "10.0.3.56", "10.0.3.57", "10.0.3.58", "10.0.3.59", "10.0.3.60", "10.0.3.61"]
		},
		"BpsVirtualBlade5Eth0IpAddress": {
			"defaultValue": "10.0.1.17",
		},
		"BpsVirtualBlade5Eth1IpAddresses": {
			"defaultValue": ["10.0.2.62", "10.0.2.63", "10.0.2.64", "10.0.2.65", "10.0.2.66", "10.0.2.67", "10.0.2.68", "10.0.2.69", "10.0.2.70", "10.0.2.71"]
		},
		"BpsVirtualBlade5Eth2IpAddresses": {
			"defaultValue": ["10.0.3.62", "10.0.3.63", "10.0.3.64", "10.0.3.65", "10.0.3.66", "10.0.3.67", "10.0.3.68", "10.0.3.69", "10.0.3.70", "10.0.3.71"]
		},
		"BpsVirtualBlade6Eth0IpAddress": {
			"defaultValue": "10.0.1.18",
		},
		"BpsVirtualBlade6Eth1IpAddresses": {
			"defaultValue": ["10.0.2.72", "10.0.2.73", "10.0.2.74", "10.0.2.75", "10.0.2.76", "10.0.2.77", "10.0.2.78", "10.0.2.79", "10.0.2.80", "10.0.2.81"]
		},
		"BpsVirtualBlade6Eth2IpAddresses": {
			"defaultValue": ["10.0.3.72", "10.0.3.73", "10.0.3.74", "10.0.3.75", "10.0.3.76", "10.0.3.77", "10.0.3.78", "10.0.3.79", "10.0.3.80", "10.0.3.81"]
		},
		"BpsVirtualBlade7Eth0IpAddress": {
			"defaultValue": "10.0.1.19",
		},
		"BpsVirtualBlade7Eth1IpAddresses": {
			"defaultValue": ["10.0.2.82", "10.0.2.83", "10.0.2.84", "10.0.2.85", "10.0.2.86", "10.0.2.87", "10.0.2.88", "10.0.2.89", "10.0.2.90", "10.0.2.91"]
		},
		"BpsVirtualBlade7Eth2IpAddresses": {
			"defaultValue": ["10.0.3.82", "10.0.3.83", "10.0.3.84", "10.0.3.85", "10.0.3.86", "10.0.3.87", "10.0.3.88", "10.0.3.89", "10.0.3.90", "10.0.3.91"]
		},
		"BpsVirtualBlade8Eth0IpAddress": {
			"defaultValue": "10.0.1.20",
		},
		"BpsVirtualBlade8Eth1IpAddresses": {
			"defaultValue": ["10.0.2.92", "10.0.2.93", "10.0.2.94", "10.0.2.95", "10.0.2.96", "10.0.2.97", "10.0.2.98", "10.0.2.99", "10.0.2.100", "10.0.2.101"]
		},
		"BpsVirtualBlade8Eth2IpAddresses": {
			"defaultValue": ["10.0.3.92", "10.0.3.93", "10.0.3.94", "10.0.3.95", "10.0.3.96", "10.0.3.97", "10.0.3.98", "10.0.3.99", "10.0.3.100", "10.0.3.101"]
		},
		"BpsVirtualBlade9Eth0IpAddress": {
			"defaultValue": "10.0.1.21",
		},
		"BpsVirtualBlade9Eth1IpAddresses": {
			"defaultValue": ["10.0.2.102", "10.0.2.103", "10.0.2.104", "10.0.2.105", "10.0.2.106", "10.0.2.107", "10.0.2.108", "10.0.2.109", "10.0.2.110", "10.0.2.111"]
		},
		"BpsVirtualBlade9Eth2IpAddresses": {
			"defaultValue": ["10.0.3.102", "10.0.3.103", "10.0.3.104", "10.0.3.105", "10.0.3.106", "10.0.3.107", "10.0.3.108", "10.0.3.109", "10.0.3.110", "10.0.3.111"]
		},
		"BpsVirtualBladeAEth0IpAddress": {
			"defaultValue": "10.0.1.22",
		},
		"BpsVirtualBladeAEth1IpAddresses": {
			"defaultValue": ["10.0.2.112", "10.0.2.113", "10.0.2.114", "10.0.2.115", "10.0.2.116", "10.0.2.117", "10.0.2.118", "10.0.2.119", "10.0.2.120", "10.0.2.121"]
		},
		"BpsVirtualBladeAEth2IpAddresses": {
			"defaultValue": ["10.0.3.112", "10.0.3.113", "10.0.3.114", "10.0.3.115", "10.0.3.116", "10.0.3.117", "10.0.3.118", "10.0.3.119", "10.0.3.120", "10.0.3.121"]
		},
		"BpsVirtualBladeBEth0IpAddress": {
			"defaultValue": "10.0.1.23",
		},
		"BpsVirtualBladeBEth1IpAddresses": {
			"defaultValue": ["10.0.2.122", "10.0.2.123", "10.0.2.124", "10.0.2.125", "10.0.2.126", "10.0.2.127", "10.0.2.128", "10.0.2.129", "10.0.2.130", "10.0.2.131"]
		},
		"BpsVirtualBladeBEth2IpAddresses": {
			"defaultValue": ["10.0.3.122", "10.0.3.123", "10.0.3.124", "10.0.3.125", "10.0.3.126", "10.0.3.127", "10.0.3.128", "10.0.3.129", "10.0.3.130", "10.0.3.131"]
		},
		"BpsVirtualBladeCEth0IpAddress": {
			"defaultValue": "10.0.1.24",
		},
		"BpsVirtualBladeCEth1IpAddresses": {
			"defaultValue": ["10.0.2.132", "10.0.2.133", "10.0.2.134", "10.0.2.135", "10.0.2.136", "10.0.2.137", "10.0.2.138", "10.0.2.139", "10.0.2.140", "10.0.2.141"]
		},
		"BpsVirtualBladeCEth2IpAddresses": {
			"defaultValue": ["10.0.3.132", "10.0.3.133", "10.0.3.134", "10.0.3.135", "10.0.3.136", "10.0.3.137", "10.0.3.138", "10.0.3.139", "10.0.3.140", "10.0.3.141"]		
		},
        "BpsVirtualBladeImageName": {
			"defaultValue": "Ixia_BreakingPoint_Virtual_Blade_10.00",
			"type": "String"
		},
		"BpsVirtualBladeVmSize": {
			"defaultValue": "Standard_F16s",
			"type": "String",
			"allowedValues": [
				"Standard_F16s",
				"Standard_F8s",
				"Standard_F4s"
			]
		},
        "DiagnosticsStorageAccountName": {
			"defaultValue": "ixiadiagnostics",
			"type": "String"
		},
        "OptionalVMPrefix": {
			"defaultValue": "Ixia",
			"type": "String"
		},
		"UserEmailTag": {
			"defaultValue": "Optional-Email-Tag",
			"type": "String"
		},
		"UserProjectTag": {
			"defaultValue": "Optional-Project-Tag",
			"type": "String"
		},
		"UserOptionsTag": {
			"defaultValue": "Optional-Options-Tag",
			"type": "String"
		}
	},
    "variables": {
        "apiVersion": "2018-06-01",
		"SubscriptionId" : "[subscription().subscriptionId]",
		"OptionalVMPrefix": "[parameters('OptionalVMPrefix')]",
		"UserEmailTag": "[parameters('UserEmailTag')]",
		"UserProjectTag": "[parameters('UserProjectTag')]",
		"UserOptionsTag": "[parameters('UserOptionsTag')]",
		"IxiaImagesResourceGroupName": "[parameters('IxiaImagesResourceGroupName')]",
		"DiagnosticsStorageAccountName": "[parameters('DiagnosticsStorageAccountName')]",
        "VnetName": "[parameters('VnetName')]",
        "MgmtSubnetName": "[parameters('MgmtSubnetName')]",
		"MgmtSubnetRef": "[resourceId(resourceGroup().name, 'Microsoft.Network/virtualNetworks/subnets', variables('VnetName'),  variables('MgmtSubnetName'))]",
        "Test1SubnetName": "[parameters('Test1SubnetName')]",
        "Test1SubnetRef": "[resourceId(resourceGroup().name, 'Microsoft.Network/virtualNetworks/subnets', variables('VnetName'),  variables('Test1SubnetName'))]",
        "Test2SubnetName": "[parameters('Test2SubnetName')]",
        "Test2SubnetRef": "[resourceId(resourceGroup().name, 'Microsoft.Network/virtualNetworks/subnets', variables('VnetName'),  variables('Test2SubnetName'))]",
        "MgmtNetworkSecurityGroupName": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_NETWORK_SECURITY_GROUP')]",
        "Test1NetworkSecurityGroupName": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_TEST1_NETWORK_SECURITY_GROUP')]",  	
        "Test2NetworkSecurityGroupName": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_TEST2_NETWORK_SECURITY_GROUP')]",	
        "MgmtSshSecurityRuleName": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_SSH_RULE')]",
        "MgmtHttpSecurityRuleName": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_WEB_RULE')]",
        "MgmtHttpsSecurityRuleName": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_HTTPS_RULE')]",
        "MgmtSecurityRuleSourceIpPrefix": "[parameters('MgmtSecurityRuleSourceIpPrefix')]",
        "BpsSystemControllerEth0Name": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_SYSTEM_CONTROLLER_ETH0')]",
        "BpsVirtualBlade1Eth0Name": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_VIRTUAL_BLADE1_ETH0')]",
        "BpsVirtualBlade1Eth1Name": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_VIRTUAL_BLADE1_ETH1')]",
        "BpsVirtualBlade1Eth2Name": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_VIRTUAL_BLADE1_ETH2')]",
		"BpsVirtualBlade2Eth0Name": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_VIRTUAL_BLADE2_ETH0')]",
		"BpsVirtualBlade2Eth1Name": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_VIRTUAL_BLADE2_ETH1')]",
		"BpsVirtualBlade2Eth2Name": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_VIRTUAL_BLADE2_ETH2')]",
        "BpsVirtualBlade3Eth0Name": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_VIRTUAL_BLADE3_ETH0')]",
        "BpsVirtualBlade3Eth1Name": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_VIRTUAL_BLADE3_ETH1')]",
        "BpsVirtualBlade3Eth2Name": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_VIRTUAL_BLADE3_ETH2')]",
        "BpsVirtualBlade4Eth0Name": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_VIRTUAL_BLADE4_ETH0')]",
        "BpsVirtualBlade4Eth1Name": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_VIRTUAL_BLADE4_ETH1')]",
        "BpsVirtualBlade4Eth2Name": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_VIRTUAL_BLADE4_ETH2')]",	
        "BpsVirtualBlade5Eth0Name": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_VIRTUAL_BLADE5_ETH0')]",
        "BpsVirtualBlade5Eth1Name": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_VIRTUAL_BLADE5_ETH1')]",
        "BpsVirtualBlade5Eth2Name": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_VIRTUAL_BLADE5_ETH2')]",
        "BpsVirtualBlade6Eth0Name": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_VIRTUAL_BLADE6_ETH0')]",
        "BpsVirtualBlade6Eth1Name": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_VIRTUAL_BLADE6_ETH1')]",
        "BpsVirtualBlade6Eth2Name": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_VIRTUAL_BLADE6_ETH2')]",	
        "BpsVirtualBlade7Eth0Name": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_VIRTUAL_BLADE7_ETH0')]",
        "BpsVirtualBlade7Eth1Name": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_VIRTUAL_BLADE7_ETH1')]",
        "BpsVirtualBlade7Eth2Name": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_VIRTUAL_BLADE7_ETH2')]",
        "BpsVirtualBlade8Eth0Name": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_VIRTUAL_BLADE8_ETH0')]",
        "BpsVirtualBlade8Eth1Name": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_VIRTUAL_BLADE8_ETH1')]",
        "BpsVirtualBlade8Eth2Name": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_VIRTUAL_BLADE8_ETH2')]",	
		"BpsVirtualBlade9Eth0Name": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_VIRTUAL_BLADE9_ETH0')]",
		"BpsVirtualBlade9Eth1Name": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_VIRTUAL_BLADE9_ETH1')]",
		"BpsVirtualBlade9Eth2Name": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_VIRTUAL_BLADE9_ETH2')]",
		"BpsVirtualBladeAEth0Name": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_VIRTUAL_BLADEA_ETH0')]",
		"BpsVirtualBladeAEth1Name": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_VIRTUAL_BLADEA_ETH1')]",
		"BpsVirtualBladeAEth2Name": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_VIRTUAL_BLADEA_ETH2')]",	
		"BpsVirtualBladeBEth0Name": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_VIRTUAL_BLADEB_ETH0')]",
		"BpsVirtualBladeBEth1Name": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_VIRTUAL_BLADEB_ETH1')]",
		"BpsVirtualBladeBEth2Name": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_VIRTUAL_BLADEB_ETH2')]",
		"BpsVirtualBladeCEth0Name": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_VIRTUAL_BLADEC_ETH0')]",
		"BpsVirtualBladeCEth1Name": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_VIRTUAL_BLADEC_ETH1')]",
		"BpsVirtualBladeCEth2Name": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_VIRTUAL_BLADEC_ETH2')]",
		"BpsVirtualBlade1Eth0IpAddress": "[parameters('BpsVirtualBlade1Eth0IpAddress')]",
		"BpsVirtualBlade1Eth1IpAddresses": "[parameters('BpsVirtualBlade1Eth1IpAddresses')]",
		"BpsVirtualBlade1Eth2IpAddresses": "[parameters('BpsVirtualBlade1Eth2IpAddresses')]",
		"BpsVirtualBlade2Eth0IpAddress": "[parameters('BpsVirtualBlade2Eth0IpAddress')]",
		"BpsVirtualBlade2Eth1IpAddresses": "[parameters('BpsVirtualBlade2Eth1IpAddresses')]",
		"BpsVirtualBlade2Eth2IpAddresses": "[parameters('BpsVirtualBlade2Eth2IpAddresses')]",
		"BpsVirtualBlade3Eth0IpAddress": "[parameters('BpsVirtualBlade3Eth0IpAddress')]",
		"BpsVirtualBlade3Eth1IpAddresses": "[parameters('BpsVirtualBlade3Eth1IpAddresses')]",
		"BpsVirtualBlade3Eth2IpAddresses": "[parameters('BpsVirtualBlade3Eth2IpAddresses')]",
		"BpsVirtualBlade4Eth0IpAddress": "[parameters('BpsVirtualBlade4Eth0IpAddress')]",
		"BpsVirtualBlade4Eth1IpAddresses": "[parameters('BpsVirtualBlade4Eth1IpAddresses')]",
		"BpsVirtualBlade4Eth2IpAddresses": "[parameters('BpsVirtualBlade4Eth2IpAddresses')]",
		"BpsVirtualBlade5Eth0IpAddress": "[parameters('BpsVirtualBlade5Eth0IpAddress')]",
		"BpsVirtualBlade5Eth1IpAddresses": "[parameters('BpsVirtualBlade5Eth1IpAddresses')]",
		"BpsVirtualBlade5Eth2IpAddresses": "[parameters('BpsVirtualBlade5Eth2IpAddresses')]",
		"BpsVirtualBlade6Eth0IpAddress": "[parameters('BpsVirtualBlade6Eth0IpAddress')]",
		"BpsVirtualBlade6Eth1IpAddresses": "[parameters('BpsVirtualBlade6Eth1IpAddresses')]",
		"BpsVirtualBlade6Eth2IpAddresses": "[parameters('BpsVirtualBlade6Eth2IpAddresses')]",
		"BpsVirtualBlade7Eth0IpAddress": "[parameters('BpsVirtualBlade7Eth0IpAddress')]",
		"BpsVirtualBlade7Eth1IpAddresses": "[parameters('BpsVirtualBlade7Eth1IpAddresses')]",
		"BpsVirtualBlade7Eth2IpAddresses": "[parameters('BpsVirtualBlade7Eth2IpAddresses')]",
		"BpsVirtualBlade8Eth0IpAddress": "[parameters('BpsVirtualBlade8Eth0IpAddress')]",
		"BpsVirtualBlade8Eth1IpAddresses": "[parameters('BpsVirtualBlade8Eth1IpAddresses')]",
		"BpsVirtualBlade8Eth2IpAddresses": "[parameters('BpsVirtualBlade8Eth2IpAddresses')]",
		"BpsVirtualBlade9Eth0IpAddress": "[parameters('BpsVirtualBlade9Eth0IpAddress')]",
		"BpsVirtualBlade9Eth1IpAddresses": "[parameters('BpsVirtualBlade9Eth1IpAddresses')]",
		"BpsVirtualBlade9Eth2IpAddresses": "[parameters('BpsVirtualBlade9Eth2IpAddresses')]",
		"BpsVirtualBladeAEth0IpAddress": "[parameters('BpsVirtualBladeAEth0IpAddress')]",
		"BpsVirtualBladeAEth1IpAddresses": "[parameters('BpsVirtualBladeAEth1IpAddresses')]",
		"BpsVirtualBladeAEth2IpAddresses": "[parameters('BpsVirtualBladeAEth2IpAddresses')]",
		"BpsVirtualBladeBEth0IpAddress": "[parameters('BpsVirtualBladeBEth0IpAddress')]",
		"BpsVirtualBladeBEth1IpAddresses": "[parameters('BpsVirtualBladeBEth1IpAddresses')]",
		"BpsVirtualBladeBEth2IpAddresses": "[parameters('BpsVirtualBladeBEth2IpAddresses')]",
		"BpsVirtualBladeCEth0IpAddress": "[parameters('BpsVirtualBladeCEth0IpAddress')]",
		"BpsVirtualBladeCEth1IpAddresses": "[parameters('BpsVirtualBladeCEth1IpAddresses')]",
		"BpsVirtualBladeCEth2IpAddresses": "[parameters('BpsVirtualBladeCEth2IpAddresses')]",
        "BpsSystemControllerName": "[concat(variables('OptionalVMPrefix'), '-', 'BPS-AZURE-SYSTEM-CONTROLLER')]",
		"BpsSystemControllerDnsLabel": "[concat(toLower(replace(resourceGroup().name, '_', '-')), '-', 'bps-sys-ctrl', '-', substring(uniqueString(resourceGroup().id),0,6))]",
        "BpsSystemControllerEnableAcceleratedNetworking": false,
        "BpsSystemControllerEnableIPForwarding": false,
		"BpsSystemControllerDisablePasswordAuthentication": false,
		"BpsSystemControllerProvisionVMAgent": false,
		"BpsSystemControllerBootDiagnosticsEnabled": true,
        "BpsSystemControllerVmSize": "[parameters('BpsSystemControllerVmSize')]",
		"BpsSystemControllerDiskSizeGB": "20",
        "BpsVirtualBlade1Name": "[concat(variables('OptionalVMPrefix'), '-', 'BPS-AZURE-VIRTUAL-BLADE1')]",
		"BpsVirtualBlade1DnsLabel": "[concat(toLower(replace(resourceGroup().name, '_', '-')), '-', 'bps-vblade-1', '-', substring(uniqueString(resourceGroup().id),0,6))]",
        "BpsVirtualBlade2Name": "[concat(variables('OptionalVMPrefix'), '-', 'BPS-AZURE-VIRTUAL-BLADE2')]",
		"BpsVirtualBlade2DnsLabel": "[concat(toLower(replace(resourceGroup().name, '_', '-')), '-', 'bps-vblade-2', '-', substring(uniqueString(resourceGroup().id),0,6))]",
        "BpsVirtualBlade3Name": "[concat(variables('OptionalVMPrefix'), '-', 'BPS-AZURE-VIRTUAL-BLADE3')]",
		"BpsVirtualBlade3DnsLabel": "[concat(toLower(replace(resourceGroup().name, '_', '-')), '-', 'bps-vblade-3', '-', substring(uniqueString(resourceGroup().id),0,6))]",
        "BpsVirtualBlade4Name": "[concat(variables('OptionalVMPrefix'), '-', 'BPS-AZURE-VIRTUAL-BLADE4')]",		
		"BpsVirtualBlade4DnsLabel": "[concat(toLower(replace(resourceGroup().name, '_', '-')), '-', 'bps-vblade-4', '-', substring(uniqueString(resourceGroup().id),0,6))]",
        "BpsVirtualBlade5Name": "[concat(variables('OptionalVMPrefix'), '-', 'BPS-AZURE-VIRTUAL-BLADE5')]",
		"BpsVirtualBlade5DnsLabel": "[concat(toLower(replace(resourceGroup().name, '_', '-')), '-', 'bps-vblade-5', '-', substring(uniqueString(resourceGroup().id),0,6))]",
        "BpsVirtualBlade6Name": "[concat(variables('OptionalVMPrefix'), '-', 'BPS-AZURE-VIRTUAL-BLADE6')]",
		"BpsVirtualBlade6DnsLabel": "[concat(toLower(replace(resourceGroup().name, '_', '-')), '-', 'bps-vblade-6', '-', substring(uniqueString(resourceGroup().id),0,6))]",
        "BpsVirtualBlade7Name": "[concat(variables('OptionalVMPrefix'), '-', 'BPS-AZURE-VIRTUAL-BLADE7')]",
		"BpsVirtualBlade7DnsLabel": "[concat(toLower(replace(resourceGroup().name, '_', '-')), '-', 'bps-vblade-7', '-', substring(uniqueString(resourceGroup().id),0,6))]",
        "BpsVirtualBlade8Name": "[concat(variables('OptionalVMPrefix'), '-', 'BPS-AZURE-VIRTUAL-BLADE8')]",
		"BpsVirtualBlade8DnsLabel": "[concat(toLower(replace(resourceGroup().name, '_', '-')), '-', 'bps-vblade-8', '-', substring(uniqueString(resourceGroup().id),0,6))]",
        "BpsVirtualBlade9Name": "[concat(variables('OptionalVMPrefix'), '-', 'BPS-AZURE-VIRTUAL-BLADE9')]",
		"BpsVirtualBlade9DnsLabel": "[concat(toLower(replace(resourceGroup().name, '_', '-')), '-', 'bps-vblade-9', '-', substring(uniqueString(resourceGroup().id),0,6))]",
        "BpsVirtualBladeAName": "[concat(variables('OptionalVMPrefix'), '-', 'BPS-AZURE-VIRTUAL-BLADEA')]",
		"BpsVirtualBladeADnsLabel": "[concat(toLower(replace(resourceGroup().name, '_', '-')), '-', 'bps-vblade-A', '-', substring(uniqueString(resourceGroup().id),0,6))]",
        "BpsVirtualBladeBName": "[concat(variables('OptionalVMPrefix'), '-', 'BPS-AZURE-VIRTUAL-BLADEB')]",
		"BpsVirtualBladeBDnsLabel": "[concat(toLower(replace(resourceGroup().name, '_', '-')), '-', 'bps-vblade-B', '-', substring(uniqueString(resourceGroup().id),0,6))]",
        "BpsVirtualBladeCName": "[concat(variables('OptionalVMPrefix'), '-', 'BPS-AZURE-VIRTUAL-BLADEC')]",
		"BpsVirtualBladeCDnsLabel": "[concat(toLower(replace(resourceGroup().name, '_', '-')), '-', 'bps-vblade-C', '-', substring(uniqueString(resourceGroup().id),0,6))]",
        "BpsVirtualBladeEnableAcceleratedNetworking": true,
        "BpsVirtualBladeEnableIPForwarding": true,
		"BpsVirtualBladeDisablePasswordAuthentication": false,
		"BpsVirtualBladeProvisionVMAgent": false,
		"BpsVirtualBladeBootDiagnosticsEnabled": true,
        "BpsVirtualBladeVmSize": "[parameters('BpsVirtualBladeVmSize')]",
		"BpsVirtualBladeDiskSizeGB": "14",
        "MgmtPublicIpAddressName": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_MGMT_PUBLIC_IP')]",
        "BpsVirtualBlade1Eth0PublicIpAddressName": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_BPS_VIRTUAL_BLADE1_ETH0_PUBLIC_IP')]",
        "BpsVirtualBlade2Eth0PublicIpAddressName": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_BPS_VIRTUAL_BLADE2_ETH0_PUBLIC_IP')]",
        "BpsVirtualBlade3Eth0PublicIpAddressName": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_BPS_VIRTUAL_BLADE3_ETH0_PUBLIC_IP')]",
        "BpsVirtualBlade4Eth0PublicIpAddressName": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_BPS_VIRTUAL_BLADE4_ETH0_PUBLIC_IP')]",
        "BpsVirtualBlade5Eth0PublicIpAddressName": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_BPS_VIRTUAL_BLADE5_ETH0_PUBLIC_IP')]",
        "BpsVirtualBlade6Eth0PublicIpAddressName": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_BPS_VIRTUAL_BLADE6_ETH0_PUBLIC_IP')]",
        "BpsVirtualBlade7Eth0PublicIpAddressName": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_BPS_VIRTUAL_BLADE7_ETH0_PUBLIC_IP')]",
        "BpsVirtualBlade8Eth0PublicIpAddressName": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_BPS_VIRTUAL_BLADE8_ETH0_PUBLIC_IP')]",
        "BpsVirtualBlade9Eth0PublicIpAddressName": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_BPS_VIRTUAL_BLADE9_ETH0_PUBLIC_IP')]",
        "BpsVirtualBladeAEth0PublicIpAddressName": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_BPS_VIRTUAL_BLADEA_ETH0_PUBLIC_IP')]",
        "BpsVirtualBladeBEth0PublicIpAddressName": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_BPS_VIRTUAL_BLADEB_ETH0_PUBLIC_IP')]",
        "BpsVirtualBladeCEth0PublicIpAddressName": "[concat(variables('OptionalVMPrefix'), '_', 'BPS_AZURE_BPS_VIRTUAL_BLADEC_ETH0_PUBLIC_IP')]",
        "BpsSystemControllerImageName": "[parameters('BpsSystemControllerImageName')]",
		"BpsSystemControllerCreateOption": "FromImage",
		"BpsSystemControllerImageId": "[concat('/subscriptions/', variables('SubscriptionId'), '/resourceGroups/', variables('IxiaImagesResourceGroupName'), '/providers/Microsoft.Compute/images/', variables('BpsSystemControllerImageName'))]",
        "BpsVirtualBladeImageName": "[parameters('BpsVirtualBladeImageName')]",
		"BpsVirtualBladeImageId": "[concat('/subscriptions/', variables('SubscriptionId'), '/resourceGroups/', variables('IxiaImagesResourceGroupName'), '/providers/Microsoft.Compute/images/', variables('BpsVirtualBladeImageName'))]",		
		"BpsVirtualBladeCreateOption": "FromImage",		
		"AdminUserName": "bpcloud",
		"AdminPassword": "Ixia1234!"
	},
    "resources": [
        {
            "type": "Microsoft.Network/networkSecurityGroups",
            "name": "[variables('MgmtNetworkSecurityGroupName')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "securityRules": [
                    {
                        "name": "[variables('MgmtHttpsSecurityRuleName')]",
                        "properties": {
                            "description": "Allow HTTPS",
                            "protocol": "Tcp",
                            "sourcePortRange": "*",
                            "destinationPortRange": "443",
                            "sourceAddressPrefix": "[variables('MgmtSecurityRuleSourceIpPrefix')]",
                            "destinationAddressPrefix": "*",
                            "access": "Allow",
                            "priority": 100,
                            "direction": "Inbound",
                            "sourceAddressPrefixes": [],
                            "destinationAddressPrefixes": []
                        }
                    },
                    {
                        "name": "[variables('MgmtSshSecurityRuleName')]",
                        "properties": {
                            "description": "Allow SSH",
                            "protocol": "Tcp",
                            "sourcePortRange": "*",
                            "destinationPortRange": "22",
                            "sourceAddressPrefix": "[variables('MgmtSecurityRuleSourceIpPrefix')]",
                            "destinationAddressPrefix": "*",
                            "access": "Allow",
                            "priority": 101,
                            "direction": "Inbound",
                            "sourceAddressPrefixes": [],
                            "destinationAddressPrefixes": []
                        }
                    },
                    {
                        "name": "[variables('MgmtHttpSecurityRuleName')]",
                        "properties": {
                            "description": "Allow HTTP",
                            "protocol": "Tcp",
                            "sourcePortRange": "*",
                            "destinationPortRange": "80",
                            "sourceAddressPrefix": "[variables('MgmtSecurityRuleSourceIpPrefix')]",
                            "destinationAddressPrefix": "*",
                            "access": "Allow",
                            "priority": 102,
                            "direction": "Inbound",
                            "sourceAddressPrefixes": [],
                            "destinationAddressPrefixes": []
                        }
                    }
                ]
            },
            "dependsOn": []
        }, 

        {
            "type": "Microsoft.Network/networkSecurityGroups",
            "name": "[variables('Test1NetworkSecurityGroupName')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
				"Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "securityRules": [
                    {
                        "name": "[variables('MgmtHttpSecurityRuleName')]",
                        "properties": {
                            "description": "Allow HTTP",
                            "protocol": "Tcp",
                            "sourcePortRange": "*",
                            "destinationPortRange": "80",
                            "sourceAddressPrefix": "[variables('MgmtSecurityRuleSourceIpPrefix')]",
                            "destinationAddressPrefix": "*",
                            "access": "Allow",
                            "priority": 102,
                            "direction": "Inbound",
                            "sourceAddressPrefixes": [],
                            "destinationAddressPrefixes": []
                        }
                    }
                ]
            },
            "dependsOn": []
        }, 

        {
            "type": "Microsoft.Network/networkSecurityGroups",
            "name": "[variables('Test2NetworkSecurityGroupName')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
				"Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "securityRules": [
                    {
                        "name": "[variables('MgmtHttpSecurityRuleName')]",
                        "properties": {
                            "description": "Allow HTTP",
                            "protocol": "Tcp",
                            "sourcePortRange": "*",
                            "destinationPortRange": "80",
                            "sourceAddressPrefix": "[variables('MgmtSecurityRuleSourceIpPrefix')]",
                            "destinationAddressPrefix": "*",
                            "access": "Allow",
                            "priority": 102,
                            "direction": "Inbound",
                            "sourceAddressPrefixes": [],
                            "destinationAddressPrefixes": []
                        }
                    }
                ]
            },
            "dependsOn": []
        }, 
        
        {
            "type": "Microsoft.Network/networkInterfaces",
            "name": "[variables('BpsSystemControllerEth0Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipconfig1",
                        "properties": {
                            "privateIPAllocationMethod": "Dynamic",
                            "publicIPAddress": {
                                "id": "[resourceId('Microsoft.Network/publicIPAddresses', variables('MgmtPublicIpAddressName'))]"
                            },
                            "subnet": {
                                "id": "[variables('MgmtSubnetRef')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4"
                        }
                    }
                ],
                "dnsSettings": {
                    "dnsServers": [],
                    "appliedDnsServers": []
                },
                "enableAcceleratedNetworking": "[variables('BpsSystemControllerEnableAcceleratedNetworking')]",
                "enableIPForwarding": "[variables('BpsSystemControllerEnableIPForwarding')]",
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups', variables('MgmtNetworkSecurityGroupName'))]"
                },
                "primary": true,
                "virtualMachine": {
                    "id": "[resourceId('Microsoft.Compute/virtualMachines', variables('BpsSystemControllerName'))]"
                }
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkSecurityGroups', variables('MgmtNetworkSecurityGroupName'))]",
                "[resourceId('Microsoft.Network/publicIPAddresses', variables('MgmtPublicIpAddressName'))]"
            ]
        },

        {
            "type": "Microsoft.Network/networkInterfaces",
            "name": "[variables('BpsVirtualBlade1Eth0Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipconfig1",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade1Eth0IpAddress')]",
                            "privateIPAllocationMethod": "Static",
                            "publicIPAddress": {
                                "id": "[resourceId('Microsoft.Network/publicIPAddresses', variables('BpsVirtualBlade1Eth0PublicIpAddressName'))]"
                            },
                            "subnet": {
                                "id": "[variables('MgmtSubnetRef')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4"
                        }
                    }
                ],
                "dnsSettings": {
                    "dnsServers": [],
                    "appliedDnsServers": []
                },
                "enableAcceleratedNetworking": "[variables('BpsVirtualBladeEnableAcceleratedNetworking')]",
                "enableIPForwarding": "[variables('BpsVirtualBladeEnableIPForwarding')]",
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups', variables('MgmtNetworkSecurityGroupName'))]"
                },
                "primary": true
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkSecurityGroups', variables('MgmtNetworkSecurityGroupName'))]",
                "[resourceId('Microsoft.Network/publicIPAddresses', variables('BpsVirtualBlade1Eth0PublicIpAddressName'))]"
            ]
        },      
 
        {
            "type": "Microsoft.Network/networkInterfaces",
            "name": "[variables('BpsVirtualBlade1Eth1Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipconfig1",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade1Eth1IpAddresses')[0]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig2",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade1Eth1IpAddresses')[1]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig3",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade1Eth1IpAddresses')[2]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig4",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade1Eth1IpAddresses')[3]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig5",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade1Eth1IpAddresses')[4]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig6",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade1Eth1IpAddresses')[5]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig7",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade1Eth1IpAddresses')[6]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig8",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade1Eth1IpAddresses')[7]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig9",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade1Eth1IpAddresses')[8]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfigA",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade1Eth1IpAddresses')[9]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    }
                ],
                "dnsSettings": {
                    "dnsServers": [],
                    "appliedDnsServers": []
                },
                "enableAcceleratedNetworking": "[variables('BpsVirtualBladeEnableAcceleratedNetworking')]",
                "enableIPForwarding": "[variables('BpsVirtualBladeEnableIPForwarding')]",
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test1NetworkSecurityGroupName'))]"
                },
                "primary": false
            },
            "dependsOn": [
				"[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test1NetworkSecurityGroupName'))]"
            ]
        },
 
        {
            "type": "Microsoft.Network/networkInterfaces",
            "name": "[variables('BpsVirtualBlade1Eth2Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipconfig1",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade1Eth2IpAddresses')[0]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig2",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade1Eth2IpAddresses')[1]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig3",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade1Eth2IpAddresses')[2]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig4",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade1Eth2IpAddresses')[3]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig5",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade1Eth2IpAddresses')[4]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig6",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade1Eth2IpAddresses')[5]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig7",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade1Eth2IpAddresses')[6]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig8",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade1Eth2IpAddresses')[7]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig9",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade1Eth2IpAddresses')[8]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfigA",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade1Eth2IpAddresses')[9]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    }
                 ],
                "dnsSettings": {
                    "dnsServers": [],
                    "appliedDnsServers": []
                },
                "enableAcceleratedNetworking": "[variables('BpsVirtualBladeEnableAcceleratedNetworking')]",
                "enableIPForwarding": "[variables('BpsVirtualBladeEnableIPForwarding')]",
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test2NetworkSecurityGroupName'))]"
                },
                "primary": false
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test2NetworkSecurityGroupName'))]"
            ]
        },

        {
            "type": "Microsoft.Network/networkInterfaces",
            "name": "[variables('BpsVirtualBlade2Eth0Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipconfig1",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade2Eth0IpAddress')]",
                            "privateIPAllocationMethod": "Static",
                            "publicIPAddress": {
                                "id": "[resourceId('Microsoft.Network/publicIPAddresses', variables('BpsVirtualBlade2Eth0PublicIpAddressName'))]"
                            },
                            "subnet": {
                                "id": "[variables('MgmtSubnetRef')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4"
                        }
                    }
                ],
                "dnsSettings": {
                    "dnsServers": [],
                    "appliedDnsServers": []
                },
                "enableAcceleratedNetworking": "[variables('BpsVirtualBladeEnableAcceleratedNetworking')]",
                "enableIPForwarding": "[variables('BpsVirtualBladeEnableIPForwarding')]",
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups', variables('MgmtNetworkSecurityGroupName'))]"
                },
                "primary": true
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkSecurityGroups', variables('MgmtNetworkSecurityGroupName'))]",
                "[resourceId('Microsoft.Network/publicIPAddresses', variables('BpsVirtualBlade2Eth0PublicIpAddressName'))]"
            ]
        },      
 
       {
            "type": "Microsoft.Network/networkInterfaces",
            "name": "[variables('BpsVirtualBlade2Eth1Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipconfig1",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade2Eth1IpAddresses')[0]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig2",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade2Eth1IpAddresses')[1]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig3",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade2Eth1IpAddresses')[2]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig4",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade2Eth1IpAddresses')[3]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig5",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade2Eth1IpAddresses')[4]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig6",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade2Eth1IpAddresses')[5]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig7",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade2Eth1IpAddresses')[6]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig8",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade2Eth1IpAddresses')[7]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig9",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade2Eth1IpAddresses')[8]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfigA",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade2Eth1IpAddresses')[9]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    }
                ],
                "dnsSettings": {
                    "dnsServers": [],
                    "appliedDnsServers": []
                },
                "enableAcceleratedNetworking": "[variables('BpsVirtualBladeEnableAcceleratedNetworking')]",
                "enableIPForwarding": "[variables('BpsVirtualBladeEnableIPForwarding')]",
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test1NetworkSecurityGroupName'))]"
                },
                "primary": false
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test1NetworkSecurityGroupName'))]"
            ]
        },
 
        {
            "type": "Microsoft.Network/networkInterfaces",
            "name": "[variables('BpsVirtualBlade2Eth2Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipconfig1",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade2Eth2IpAddresses')[0]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig2",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade2Eth2IpAddresses')[1]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig3",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade2Eth2IpAddresses')[2]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig4",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade2Eth2IpAddresses')[3]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig5",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade2Eth2IpAddresses')[4]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig6",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade2Eth2IpAddresses')[5]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig7",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade2Eth2IpAddresses')[6]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig8",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade2Eth2IpAddresses')[7]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig9",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade2Eth2IpAddresses')[8]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfigA",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade2Eth2IpAddresses')[9]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    }
                ],
                "dnsSettings": {
                    "dnsServers": [],
                    "appliedDnsServers": []
                },
                "enableAcceleratedNetworking": "[variables('BpsVirtualBladeEnableAcceleratedNetworking')]",
                "enableIPForwarding": "[variables('BpsVirtualBladeEnableIPForwarding')]",
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test2NetworkSecurityGroupName'))]"
                },
                "primary": false
            },
            "dependsOn": [
				"[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test2NetworkSecurityGroupName'))]"
            ]
        },

        {
            "type": "Microsoft.Network/networkInterfaces",
            "name": "[variables('BpsVirtualBlade3Eth0Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipconfig1",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade3Eth0IpAddress')]",
                            "privateIPAllocationMethod": "Static",
                            "publicIPAddress": {
                                "id": "[resourceId('Microsoft.Network/publicIPAddresses', variables('BpsVirtualBlade3Eth0PublicIpAddressName'))]"
                            },
                            "subnet": {
                                "id": "[variables('MgmtSubnetRef')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4"
                        }
                    }
                ],
                "dnsSettings": {
                    "dnsServers": [],
                    "appliedDnsServers": []
                },
                "enableAcceleratedNetworking": "[variables('BpsVirtualBladeEnableAcceleratedNetworking')]",
                "enableIPForwarding": "[variables('BpsVirtualBladeEnableIPForwarding')]",
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups', variables('MgmtNetworkSecurityGroupName'))]"
                },
                "primary": true
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkSecurityGroups', variables('MgmtNetworkSecurityGroupName'))]",
                "[resourceId('Microsoft.Network/publicIPAddresses', variables('BpsVirtualBlade3Eth0PublicIpAddressName'))]"
            ]
        },      
 
       {
            "type": "Microsoft.Network/networkInterfaces",
            "name": "[variables('BpsVirtualBlade3Eth1Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipconfig1",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade3Eth1IpAddresses')[0]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig2",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade3Eth1IpAddresses')[1]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig3",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade3Eth1IpAddresses')[2]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig4",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade3Eth1IpAddresses')[3]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig5",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade3Eth1IpAddresses')[4]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig6",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade3Eth1IpAddresses')[5]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig7",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade3Eth1IpAddresses')[6]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig8",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade3Eth1IpAddresses')[7]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig9",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade3Eth1IpAddresses')[8]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfigA",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade3Eth1IpAddresses')[9]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    }
                ],
                "dnsSettings": {
                    "dnsServers": [],
                    "appliedDnsServers": []
                },
                "enableAcceleratedNetworking": "[variables('BpsVirtualBladeEnableAcceleratedNetworking')]",
                "enableIPForwarding": "[variables('BpsVirtualBladeEnableIPForwarding')]",
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test1NetworkSecurityGroupName'))]"
                },
                "primary": false
            },
            "dependsOn": [
				"[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test1NetworkSecurityGroupName'))]"
            ]
        },
 
        {
            "type": "Microsoft.Network/networkInterfaces",
            "name": "[variables('BpsVirtualBlade3Eth2Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipconfig1",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade3Eth2IpAddresses')[0]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig2",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade3Eth2IpAddresses')[1]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig3",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade3Eth2IpAddresses')[2]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig4",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade3Eth2IpAddresses')[3]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig5",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade3Eth2IpAddresses')[4]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig6",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade3Eth2IpAddresses')[5]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig7",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade3Eth2IpAddresses')[6]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig8",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade3Eth2IpAddresses')[7]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig9",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade3Eth2IpAddresses')[8]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfigA",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade3Eth2IpAddresses')[9]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    }
                 ],
                "dnsSettings": {
                    "dnsServers": [],
                    "appliedDnsServers": []
                },
                "enableAcceleratedNetworking": "[variables('BpsVirtualBladeEnableAcceleratedNetworking')]",
                "enableIPForwarding": "[variables('BpsVirtualBladeEnableIPForwarding')]",
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test2NetworkSecurityGroupName'))]"
                },
                "primary": false
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test2NetworkSecurityGroupName'))]"
            ]
        },

        {
            "type": "Microsoft.Network/networkInterfaces",
            "name": "[variables('BpsVirtualBlade4Eth0Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipconfig1",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade4Eth0IpAddress')]",
                            "privateIPAllocationMethod": "Static",
                            "publicIPAddress": {
                                "id": "[resourceId('Microsoft.Network/publicIPAddresses', variables('BpsVirtualBlade4Eth0PublicIpAddressName'))]"
                            },
                            "subnet": {
                                "id": "[variables('MgmtSubnetRef')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4"
                        }
                    }
                ],
                "dnsSettings": {
                    "dnsServers": [],
                    "appliedDnsServers": []
                },
                "enableAcceleratedNetworking": "[variables('BpsVirtualBladeEnableAcceleratedNetworking')]",
                "enableIPForwarding": "[variables('BpsVirtualBladeEnableIPForwarding')]",
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups', variables('MgmtNetworkSecurityGroupName'))]"
                },
                "primary": true
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkSecurityGroups', variables('MgmtNetworkSecurityGroupName'))]",
                "[resourceId('Microsoft.Network/publicIPAddresses', variables('BpsVirtualBlade4Eth0PublicIpAddressName'))]"
            ]
        },      
 
       {
            "type": "Microsoft.Network/networkInterfaces",
            "name": "[variables('BpsVirtualBlade4Eth1Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipconfig1",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade4Eth1IpAddresses')[0]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig2",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade4Eth1IpAddresses')[1]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig3",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade4Eth1IpAddresses')[2]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig4",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade4Eth1IpAddresses')[3]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig5",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade4Eth1IpAddresses')[4]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig6",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade4Eth1IpAddresses')[5]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig7",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade4Eth1IpAddresses')[6]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig8",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade4Eth1IpAddresses')[7]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig9",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade4Eth1IpAddresses')[8]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfigA",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade4Eth1IpAddresses')[9]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    }
                ],
                "dnsSettings": {
                    "dnsServers": [],
                    "appliedDnsServers": []
                },
                "enableAcceleratedNetworking": "[variables('BpsVirtualBladeEnableAcceleratedNetworking')]",
                "enableIPForwarding": "[variables('BpsVirtualBladeEnableIPForwarding')]",
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test1NetworkSecurityGroupName'))]"
                },
                "primary": false
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test1NetworkSecurityGroupName'))]"
            ]
        },
 
        {
            "type": "Microsoft.Network/networkInterfaces",
            "name": "[variables('BpsVirtualBlade4Eth2Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipconfig1",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade4Eth2IpAddresses')[0]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig2",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade4Eth2IpAddresses')[1]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig3",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade4Eth2IpAddresses')[2]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig4",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade4Eth2IpAddresses')[3]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig5",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade4Eth2IpAddresses')[4]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig6",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade4Eth2IpAddresses')[5]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig7",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade4Eth2IpAddresses')[6]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig8",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade4Eth2IpAddresses')[7]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig9",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade4Eth2IpAddresses')[8]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfigA",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade4Eth2IpAddresses')[9]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    }
                 ],
                "dnsSettings": {
                    "dnsServers": [],
                    "appliedDnsServers": []
                },
                "enableAcceleratedNetworking": "[variables('BpsVirtualBladeEnableAcceleratedNetworking')]",
                "enableIPForwarding": "[variables('BpsVirtualBladeEnableIPForwarding')]",
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test2NetworkSecurityGroupName'))]"
                },
                "primary": false
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test2NetworkSecurityGroupName'))]"
            ]
        },

        {
            "type": "Microsoft.Network/networkInterfaces",
            "name": "[variables('BpsVirtualBlade5Eth0Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipconfig1",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade5Eth0IpAddress')]",
                            "privateIPAllocationMethod": "Static",
                            "publicIPAddress": {
                                "id": "[resourceId('Microsoft.Network/publicIPAddresses', variables('BpsVirtualBlade5Eth0PublicIpAddressName'))]"
                            },
                            "subnet": {
                                "id": "[variables('MgmtSubnetRef')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4"
                        }
                    }
                ],
                "dnsSettings": {
                    "dnsServers": [],
                    "appliedDnsServers": []
                },
                "enableAcceleratedNetworking": "[variables('BpsVirtualBladeEnableAcceleratedNetworking')]",
                "enableIPForwarding": "[variables('BpsVirtualBladeEnableIPForwarding')]",
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups', variables('MgmtNetworkSecurityGroupName'))]"
                },
                "primary": true
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkSecurityGroups', variables('MgmtNetworkSecurityGroupName'))]",
                "[resourceId('Microsoft.Network/publicIPAddresses', variables('BpsVirtualBlade5Eth0PublicIpAddressName'))]"
            ]
        },      
 
       {
            "type": "Microsoft.Network/networkInterfaces",
            "name": "[variables('BpsVirtualBlade5Eth1Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipconfig1",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade5Eth1IpAddresses')[0]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig2",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade5Eth1IpAddresses')[1]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig3",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade5Eth1IpAddresses')[2]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig4",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade5Eth1IpAddresses')[3]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig5",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade5Eth1IpAddresses')[4]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig6",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade5Eth1IpAddresses')[5]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig7",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade5Eth1IpAddresses')[6]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig8",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade5Eth1IpAddresses')[7]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig9",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade5Eth1IpAddresses')[8]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfigA",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade5Eth1IpAddresses')[9]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    }
                ],
                "dnsSettings": {
                    "dnsServers": [],
                    "appliedDnsServers": []
                },
                "enableAcceleratedNetworking": "[variables('BpsVirtualBladeEnableAcceleratedNetworking')]",
                "enableIPForwarding": "[variables('BpsVirtualBladeEnableIPForwarding')]",
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test1NetworkSecurityGroupName'))]"
                },
                "primary": false
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test1NetworkSecurityGroupName'))]"
            ]
        },
 
        {
            "type": "Microsoft.Network/networkInterfaces",
            "name": "[variables('BpsVirtualBlade5Eth2Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipconfig1",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade5Eth2IpAddresses')[0]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig2",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade5Eth2IpAddresses')[1]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig3",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade5Eth2IpAddresses')[2]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig4",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade5Eth2IpAddresses')[3]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig5",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade5Eth2IpAddresses')[4]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig6",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade5Eth2IpAddresses')[5]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig7",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade5Eth2IpAddresses')[6]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig8",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade5Eth2IpAddresses')[7]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig9",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade5Eth2IpAddresses')[8]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfigA",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade5Eth2IpAddresses')[9]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    }
                 ],
                "dnsSettings": {
                    "dnsServers": [],
                    "appliedDnsServers": []
                },
                "enableAcceleratedNetworking": "[variables('BpsVirtualBladeEnableAcceleratedNetworking')]",
                "enableIPForwarding": "[variables('BpsVirtualBladeEnableIPForwarding')]",
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test2NetworkSecurityGroupName'))]"
                },
                "primary": false
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test2NetworkSecurityGroupName'))]"
            ]
        },

        {
            "type": "Microsoft.Network/networkInterfaces",
            "name": "[variables('BpsVirtualBlade6Eth0Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipconfig1",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade6Eth0IpAddress')]",
                            "privateIPAllocationMethod": "Static",
                            "publicIPAddress": {
                                "id": "[resourceId('Microsoft.Network/publicIPAddresses', variables('BpsVirtualBlade6Eth0PublicIpAddressName'))]"
                            },
                            "subnet": {
                                "id": "[variables('MgmtSubnetRef')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4"
                        }
                    }
                ],
                "dnsSettings": {
                    "dnsServers": [],
                    "appliedDnsServers": []
                },
                "enableAcceleratedNetworking": "[variables('BpsVirtualBladeEnableAcceleratedNetworking')]",
                "enableIPForwarding": "[variables('BpsVirtualBladeEnableIPForwarding')]",
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups', variables('MgmtNetworkSecurityGroupName'))]"
                },
                "primary": true
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkSecurityGroups', variables('MgmtNetworkSecurityGroupName'))]",
                "[resourceId('Microsoft.Network/publicIPAddresses', variables('BpsVirtualBlade6Eth0PublicIpAddressName'))]"
            ]
        },      
 
       {
            "type": "Microsoft.Network/networkInterfaces",
            "name": "[variables('BpsVirtualBlade6Eth1Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipconfig1",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade6Eth1IpAddresses')[0]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig2",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade6Eth1IpAddresses')[1]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig3",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade6Eth1IpAddresses')[2]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig4",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade6Eth1IpAddresses')[3]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig5",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade6Eth1IpAddresses')[4]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig6",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade6Eth1IpAddresses')[5]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig7",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade6Eth1IpAddresses')[6]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig8",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade6Eth1IpAddresses')[7]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig9",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade6Eth1IpAddresses')[8]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfigA",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade6Eth1IpAddresses')[9]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    }
                ],
                "dnsSettings": {
                    "dnsServers": [],
                    "appliedDnsServers": []
                },
                "enableAcceleratedNetworking": "[variables('BpsVirtualBladeEnableAcceleratedNetworking')]",
                "enableIPForwarding": "[variables('BpsVirtualBladeEnableIPForwarding')]",
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test1NetworkSecurityGroupName'))]"
                },
                "primary": false
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test1NetworkSecurityGroupName'))]"
            ]
        },
 
        {
            "type": "Microsoft.Network/networkInterfaces",
            "name": "[variables('BpsVirtualBlade6Eth2Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipconfig1",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade6Eth2IpAddresses')[0]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig2",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade6Eth2IpAddresses')[1]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig3",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade6Eth2IpAddresses')[2]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig4",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade6Eth2IpAddresses')[3]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig5",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade6Eth2IpAddresses')[4]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig6",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade6Eth2IpAddresses')[5]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig7",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade6Eth2IpAddresses')[6]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig8",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade6Eth2IpAddresses')[7]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig9",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade6Eth2IpAddresses')[8]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfigA",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade6Eth2IpAddresses')[9]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    }
                 ],
                "dnsSettings": {
                    "dnsServers": [],
                    "appliedDnsServers": []
                },
                "enableAcceleratedNetworking": "[variables('BpsVirtualBladeEnableAcceleratedNetworking')]",
                "enableIPForwarding": "[variables('BpsVirtualBladeEnableIPForwarding')]",
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test2NetworkSecurityGroupName'))]"
                },
                "primary": false
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test2NetworkSecurityGroupName'))]"
            ]
        },

        {
            "type": "Microsoft.Network/networkInterfaces",
            "name": "[variables('BpsVirtualBlade7Eth0Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipconfig1",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade7Eth0IpAddress')]",
                            "privateIPAllocationMethod": "Static",
                            "publicIPAddress": {
                                "id": "[resourceId('Microsoft.Network/publicIPAddresses', variables('BpsVirtualBlade7Eth0PublicIpAddressName'))]"
                            },
                            "subnet": {
                                "id": "[variables('MgmtSubnetRef')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4"
                        }
                    }
                ],
                "dnsSettings": {
                    "dnsServers": [],
                    "appliedDnsServers": []
                },
                "enableAcceleratedNetworking": "[variables('BpsVirtualBladeEnableAcceleratedNetworking')]",
                "enableIPForwarding": "[variables('BpsVirtualBladeEnableIPForwarding')]",
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups', variables('MgmtNetworkSecurityGroupName'))]"
                },
                "primary": true
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkSecurityGroups', variables('MgmtNetworkSecurityGroupName'))]",
                "[resourceId('Microsoft.Network/publicIPAddresses', variables('BpsVirtualBlade7Eth0PublicIpAddressName'))]"
            ]
        },      
 
       {
            "type": "Microsoft.Network/networkInterfaces",
            "name": "[variables('BpsVirtualBlade7Eth1Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipconfig1",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade7Eth1IpAddresses')[0]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig2",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade7Eth1IpAddresses')[1]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig3",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade7Eth1IpAddresses')[2]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig4",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade7Eth1IpAddresses')[3]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig5",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade7Eth1IpAddresses')[4]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig6",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade7Eth1IpAddresses')[5]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig7",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade7Eth1IpAddresses')[6]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig8",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade7Eth1IpAddresses')[7]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig9",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade7Eth1IpAddresses')[8]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfigA",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade7Eth1IpAddresses')[9]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    }
                ],
                "dnsSettings": {
                    "dnsServers": [],
                    "appliedDnsServers": []
                },
                "enableAcceleratedNetworking": "[variables('BpsVirtualBladeEnableAcceleratedNetworking')]",
                "enableIPForwarding": "[variables('BpsVirtualBladeEnableIPForwarding')]",
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test1NetworkSecurityGroupName'))]"
                },
                "primary": false
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test1NetworkSecurityGroupName'))]"
            ]
        },
 
        {
            "type": "Microsoft.Network/networkInterfaces",
            "name": "[variables('BpsVirtualBlade7Eth2Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipconfig1",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade7Eth2IpAddresses')[0]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig2",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade7Eth2IpAddresses')[1]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig3",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade7Eth2IpAddresses')[2]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig4",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade7Eth2IpAddresses')[3]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig5",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade7Eth2IpAddresses')[4]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig6",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade7Eth2IpAddresses')[5]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig7",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade7Eth2IpAddresses')[6]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig8",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade7Eth2IpAddresses')[7]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig9",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade7Eth2IpAddresses')[8]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfigA",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade7Eth2IpAddresses')[9]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    }
                 ],
                "dnsSettings": {
                    "dnsServers": [],
                    "appliedDnsServers": []
                },
                "enableAcceleratedNetworking": "[variables('BpsVirtualBladeEnableAcceleratedNetworking')]",
                "enableIPForwarding": "[variables('BpsVirtualBladeEnableIPForwarding')]",
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test2NetworkSecurityGroupName'))]"
                },
                "primary": false
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test2NetworkSecurityGroupName'))]"
            ]
        },

        {
            "type": "Microsoft.Network/networkInterfaces",
            "name": "[variables('BpsVirtualBlade8Eth0Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipconfig1",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade8Eth0IpAddress')]",
                            "privateIPAllocationMethod": "Static",
                            "publicIPAddress": {
                                "id": "[resourceId('Microsoft.Network/publicIPAddresses', variables('BpsVirtualBlade8Eth0PublicIpAddressName'))]"
                            },
                            "subnet": {
                                "id": "[variables('MgmtSubnetRef')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4"
                        }
                    }
                ],
                "dnsSettings": {
                    "dnsServers": [],
                    "appliedDnsServers": []
                },
                "enableAcceleratedNetworking": "[variables('BpsVirtualBladeEnableAcceleratedNetworking')]",
                "enableIPForwarding": "[variables('BpsVirtualBladeEnableIPForwarding')]",
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups', variables('MgmtNetworkSecurityGroupName'))]"
                },
                "primary": true
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkSecurityGroups', variables('MgmtNetworkSecurityGroupName'))]",
                "[resourceId('Microsoft.Network/publicIPAddresses', variables('BpsVirtualBlade8Eth0PublicIpAddressName'))]"
            ]
        },      
 
       {
            "type": "Microsoft.Network/networkInterfaces",
            "name": "[variables('BpsVirtualBlade8Eth1Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipconfig1",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade8Eth1IpAddresses')[0]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig2",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade8Eth1IpAddresses')[1]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig3",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade8Eth1IpAddresses')[2]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig4",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade8Eth1IpAddresses')[3]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig5",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade8Eth1IpAddresses')[4]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig6",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade8Eth1IpAddresses')[5]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig7",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade8Eth1IpAddresses')[6]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig8",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade8Eth1IpAddresses')[7]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig9",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade8Eth1IpAddresses')[8]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfigA",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade8Eth1IpAddresses')[9]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    }
                ],
                "dnsSettings": {
                    "dnsServers": [],
                    "appliedDnsServers": []
                },
                "enableAcceleratedNetworking": "[variables('BpsVirtualBladeEnableAcceleratedNetworking')]",
                "enableIPForwarding": "[variables('BpsVirtualBladeEnableIPForwarding')]",
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test1NetworkSecurityGroupName'))]"
                },
                "primary": false
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test1NetworkSecurityGroupName'))]"
            ]
        },
 
        {
            "type": "Microsoft.Network/networkInterfaces",
            "name": "[variables('BpsVirtualBlade8Eth2Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipconfig1",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade8Eth2IpAddresses')[0]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig2",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade8Eth2IpAddresses')[1]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig3",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade8Eth2IpAddresses')[2]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig4",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade8Eth2IpAddresses')[3]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig5",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade8Eth2IpAddresses')[4]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig6",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade8Eth2IpAddresses')[5]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig7",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade8Eth2IpAddresses')[6]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig8",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade8Eth2IpAddresses')[7]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig9",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade8Eth2IpAddresses')[8]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfigA",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade8Eth2IpAddresses')[9]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    }
                 ],
                "dnsSettings": {
                    "dnsServers": [],
                    "appliedDnsServers": []
                },
                "enableAcceleratedNetworking": "[variables('BpsVirtualBladeEnableAcceleratedNetworking')]",
                "enableIPForwarding": "[variables('BpsVirtualBladeEnableIPForwarding')]",
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test2NetworkSecurityGroupName'))]"
                },
                "primary": false
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test2NetworkSecurityGroupName'))]"
            ]
        },

        {
            "type": "Microsoft.Network/networkInterfaces",
            "name": "[variables('BpsVirtualBlade9Eth0Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipconfig1",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade9Eth0IpAddress')]",
                            "privateIPAllocationMethod": "Static",
                            "publicIPAddress": {
                                "id": "[resourceId('Microsoft.Network/publicIPAddresses', variables('BpsVirtualBlade9Eth0PublicIpAddressName'))]"
                            },
                            "subnet": {
                                "id": "[variables('MgmtSubnetRef')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4"
                        }
                    }
                ],
                "dnsSettings": {
                    "dnsServers": [],
                    "appliedDnsServers": []
                },
                "enableAcceleratedNetworking": "[variables('BpsVirtualBladeEnableAcceleratedNetworking')]",
                "enableIPForwarding": "[variables('BpsVirtualBladeEnableIPForwarding')]",
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups', variables('MgmtNetworkSecurityGroupName'))]"
                },
                "primary": true
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkSecurityGroups', variables('MgmtNetworkSecurityGroupName'))]",
                "[resourceId('Microsoft.Network/publicIPAddresses', variables('BpsVirtualBlade9Eth0PublicIpAddressName'))]"
            ]
        },      
 
       {
            "type": "Microsoft.Network/networkInterfaces",
            "name": "[variables('BpsVirtualBlade9Eth1Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipconfig1",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade9Eth1IpAddresses')[0]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig2",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade9Eth1IpAddresses')[1]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig3",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade9Eth1IpAddresses')[2]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig4",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade9Eth1IpAddresses')[3]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig5",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade9Eth1IpAddresses')[4]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig6",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade9Eth1IpAddresses')[5]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig7",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade9Eth1IpAddresses')[6]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig8",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade9Eth1IpAddresses')[7]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig9",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade9Eth1IpAddresses')[8]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfigA",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade9Eth1IpAddresses')[9]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    }
                ],
                "dnsSettings": {
                    "dnsServers": [],
                    "appliedDnsServers": []
                },
                "enableAcceleratedNetworking": "[variables('BpsVirtualBladeEnableAcceleratedNetworking')]",
                "enableIPForwarding": "[variables('BpsVirtualBladeEnableIPForwarding')]",
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test1NetworkSecurityGroupName'))]"
                },
                "primary": false
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test1NetworkSecurityGroupName'))]"
            ]
        },
 
        {
            "type": "Microsoft.Network/networkInterfaces",
            "name": "[variables('BpsVirtualBlade9Eth2Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipconfig1",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade9Eth2IpAddresses')[0]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig2",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade9Eth2IpAddresses')[1]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig3",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade9Eth2IpAddresses')[2]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig4",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade9Eth2IpAddresses')[3]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig5",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade9Eth2IpAddresses')[4]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig6",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade9Eth2IpAddresses')[5]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig7",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade9Eth2IpAddresses')[6]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig8",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade9Eth2IpAddresses')[7]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig9",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade9Eth2IpAddresses')[8]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfigA",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBlade9Eth2IpAddresses')[9]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    }
                 ],
                "dnsSettings": {
                    "dnsServers": [],
                    "appliedDnsServers": []
                },
                "enableAcceleratedNetworking": "[variables('BpsVirtualBladeEnableAcceleratedNetworking')]",
                "enableIPForwarding": "[variables('BpsVirtualBladeEnableIPForwarding')]",
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test2NetworkSecurityGroupName'))]"
                },
                "primary": false
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test2NetworkSecurityGroupName'))]"
            ]
        },

        {
            "type": "Microsoft.Network/networkInterfaces",
            "name": "[variables('BpsVirtualBladeAEth0Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipconfig1",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeAEth0IpAddress')]",
                            "privateIPAllocationMethod": "Static",
                            "publicIPAddress": {
                                "id": "[resourceId('Microsoft.Network/publicIPAddresses', variables('BpsVirtualBladeAEth0PublicIpAddressName'))]"
                            },
                            "subnet": {
                                "id": "[variables('MgmtSubnetRef')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4"
                        }
                    }
                ],
                "dnsSettings": {
                    "dnsServers": [],
                    "appliedDnsServers": []
                },
                "enableAcceleratedNetworking": "[variables('BpsVirtualBladeEnableAcceleratedNetworking')]",
                "enableIPForwarding": "[variables('BpsVirtualBladeEnableIPForwarding')]",
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups', variables('MgmtNetworkSecurityGroupName'))]"
                },
                "primary": true
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkSecurityGroups', variables('MgmtNetworkSecurityGroupName'))]",
                "[resourceId('Microsoft.Network/publicIPAddresses', variables('BpsVirtualBladeAEth0PublicIpAddressName'))]"
            ]
        },      
 
       {
            "type": "Microsoft.Network/networkInterfaces",
            "name": "[variables('BpsVirtualBladeAEth1Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipconfig1",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeAEth1IpAddresses')[0]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig2",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeAEth1IpAddresses')[1]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig3",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeAEth1IpAddresses')[2]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig4",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeAEth1IpAddresses')[3]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig5",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeAEth1IpAddresses')[4]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig6",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeAEth1IpAddresses')[5]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig7",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeAEth1IpAddresses')[6]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig8",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeAEth1IpAddresses')[7]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig9",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeAEth1IpAddresses')[8]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfigA",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeAEth1IpAddresses')[9]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    }
                ],
                "dnsSettings": {
                    "dnsServers": [],
                    "appliedDnsServers": []
                },
                "enableAcceleratedNetworking": "[variables('BpsVirtualBladeEnableAcceleratedNetworking')]",
                "enableIPForwarding": "[variables('BpsVirtualBladeEnableIPForwarding')]",
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test1NetworkSecurityGroupName'))]"
                },
                "primary": false
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test1NetworkSecurityGroupName'))]"
            ]
        },
 
        {
            "type": "Microsoft.Network/networkInterfaces",
            "name": "[variables('BpsVirtualBladeAEth2Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipconfig1",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeAEth2IpAddresses')[0]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig2",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeAEth2IpAddresses')[1]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig3",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeAEth2IpAddresses')[2]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig4",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeAEth2IpAddresses')[3]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig5",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeAEth2IpAddresses')[4]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig6",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeAEth2IpAddresses')[5]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig7",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeAEth2IpAddresses')[6]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig8",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeAEth2IpAddresses')[7]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig9",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeAEth2IpAddresses')[8]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfigA",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeAEth2IpAddresses')[9]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    }
                 ],
                "dnsSettings": {
                    "dnsServers": [],
                    "appliedDnsServers": []
                },
                "enableAcceleratedNetworking": "[variables('BpsVirtualBladeEnableAcceleratedNetworking')]",
                "enableIPForwarding": "[variables('BpsVirtualBladeEnableIPForwarding')]",
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test2NetworkSecurityGroupName'))]"
                },
                "primary": false
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test2NetworkSecurityGroupName'))]"
            ]
        },

        {
            "type": "Microsoft.Network/networkInterfaces",
            "name": "[variables('BpsVirtualBladeBEth0Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipconfig1",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeBEth0IpAddress')]",
                            "privateIPAllocationMethod": "Static",
                            "publicIPAddress": {
                                "id": "[resourceId('Microsoft.Network/publicIPAddresses', variables('BpsVirtualBladeBEth0PublicIpAddressName'))]"
                            },
                            "subnet": {
                                "id": "[variables('MgmtSubnetRef')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4"
                        }
                    }
                ],
                "dnsSettings": {
                    "dnsServers": [],
                    "appliedDnsServers": []
                },
                "enableAcceleratedNetworking": "[variables('BpsVirtualBladeEnableAcceleratedNetworking')]",
                "enableIPForwarding": "[variables('BpsVirtualBladeEnableIPForwarding')]",
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups', variables('MgmtNetworkSecurityGroupName'))]"
                },
                "primary": true
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkSecurityGroups', variables('MgmtNetworkSecurityGroupName'))]",
                "[resourceId('Microsoft.Network/publicIPAddresses', variables('BpsVirtualBladeBEth0PublicIpAddressName'))]"
            ]
        },      
 
       {
            "type": "Microsoft.Network/networkInterfaces",
            "name": "[variables('BpsVirtualBladeBEth1Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipconfig1",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeBEth1IpAddresses')[0]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig2",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeBEth1IpAddresses')[1]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig3",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeBEth1IpAddresses')[2]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig4",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeBEth1IpAddresses')[3]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig5",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeBEth1IpAddresses')[4]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig6",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeBEth1IpAddresses')[5]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig7",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeBEth1IpAddresses')[6]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig8",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeBEth1IpAddresses')[7]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig9",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeBEth1IpAddresses')[8]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfigA",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeBEth1IpAddresses')[9]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    }
                ],
                "dnsSettings": {
                    "dnsServers": [],
                    "appliedDnsServers": []
                },
                "enableAcceleratedNetworking": "[variables('BpsVirtualBladeEnableAcceleratedNetworking')]",
                "enableIPForwarding": "[variables('BpsVirtualBladeEnableIPForwarding')]",
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test1NetworkSecurityGroupName'))]"
                },
                "primary": false
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test1NetworkSecurityGroupName'))]"
            ]
        },
 
        {
            "type": "Microsoft.Network/networkInterfaces",
            "name": "[variables('BpsVirtualBladeBEth2Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipconfig1",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeBEth2IpAddresses')[0]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig2",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeBEth2IpAddresses')[1]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig3",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeBEth2IpAddresses')[2]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig4",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeBEth2IpAddresses')[3]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig5",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeBEth2IpAddresses')[4]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig6",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeBEth2IpAddresses')[5]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig7",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeBEth2IpAddresses')[6]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig8",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeBEth2IpAddresses')[7]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig9",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeBEth2IpAddresses')[8]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfigA",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeBEth2IpAddresses')[9]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    }
                 ],
                "dnsSettings": {
                    "dnsServers": [],
                    "appliedDnsServers": []
                },
                "enableAcceleratedNetworking": "[variables('BpsVirtualBladeEnableAcceleratedNetworking')]",
                "enableIPForwarding": "[variables('BpsVirtualBladeEnableIPForwarding')]",
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test2NetworkSecurityGroupName'))]"
                },
                "primary": false
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test2NetworkSecurityGroupName'))]"
            ]
        },

        {
            "type": "Microsoft.Network/networkInterfaces",
            "name": "[variables('BpsVirtualBladeCEth0Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipconfig1",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeCEth0IpAddress')]",
                            "privateIPAllocationMethod": "Static",
                            "publicIPAddress": {
                                "id": "[resourceId('Microsoft.Network/publicIPAddresses', variables('BpsVirtualBladeCEth0PublicIpAddressName'))]"
                            },
                            "subnet": {
                                "id": "[variables('MgmtSubnetRef')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4"
                        }
                    }
                ],
                "dnsSettings": {
                    "dnsServers": [],
                    "appliedDnsServers": []
                },
                "enableAcceleratedNetworking": "[variables('BpsVirtualBladeEnableAcceleratedNetworking')]",
                "enableIPForwarding": "[variables('BpsVirtualBladeEnableIPForwarding')]",
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups', variables('MgmtNetworkSecurityGroupName'))]"
                },
                "primary": true
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkSecurityGroups', variables('MgmtNetworkSecurityGroupName'))]",
                "[resourceId('Microsoft.Network/publicIPAddresses', variables('BpsVirtualBladeCEth0PublicIpAddressName'))]"
            ]
        },      
 
       {
            "type": "Microsoft.Network/networkInterfaces",
            "name": "[variables('BpsVirtualBladeCEth1Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipconfig1",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeCEth1IpAddresses')[0]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig2",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeCEth1IpAddresses')[1]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig3",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeCEth1IpAddresses')[2]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig4",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeCEth1IpAddresses')[3]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig5",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeCEth1IpAddresses')[4]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig6",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeCEth1IpAddresses')[5]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig7",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeCEth1IpAddresses')[6]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig8",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeCEth1IpAddresses')[7]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig9",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeCEth1IpAddresses')[8]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfigA",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeCEth1IpAddresses')[9]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test1SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    }
                ],
                "dnsSettings": {
                    "dnsServers": [],
                    "appliedDnsServers": []
                },
                "enableAcceleratedNetworking": "[variables('BpsVirtualBladeEnableAcceleratedNetworking')]",
                "enableIPForwarding": "[variables('BpsVirtualBladeEnableIPForwarding')]",
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test1NetworkSecurityGroupName'))]"
                },
                "primary": false
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test1NetworkSecurityGroupName'))]"
            ]
        },
 
        {
            "type": "Microsoft.Network/networkInterfaces",
            "name": "[variables('BpsVirtualBladeCEth2Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipconfig1",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeCEth2IpAddresses')[0]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig2",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeCEth2IpAddresses')[1]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig3",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeCEth2IpAddresses')[2]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig4",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeCEth2IpAddresses')[3]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig5",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeCEth2IpAddresses')[4]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig6",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeCEth2IpAddresses')[5]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig7",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeCEth2IpAddresses')[6]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig8",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeCEth2IpAddresses')[7]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfig9",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeCEth2IpAddresses')[8]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "ipconfigA",
                        "properties": {
                            "privateIPAddress": "[variables('BpsVirtualBladeCEth2IpAddresses')[9]]",
                            "privateIPAllocationMethod": "Static",
                            "subnet": {
                                "id": "[variables('Test2SubnetRef')]"
                            },
                            "primary": false,
                            "privateIPAddressVersion": "IPv4"
                        }
                    }
                 ],
                "dnsSettings": {
                    "dnsServers": [],
                    "appliedDnsServers": []
                },
                "enableAcceleratedNetworking": "[variables('BpsVirtualBladeEnableAcceleratedNetworking')]",
                "enableIPForwarding": "[variables('BpsVirtualBladeEnableIPForwarding')]",
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test2NetworkSecurityGroupName'))]"
                },
                "primary": false
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkSecurityGroups', variables('Test2NetworkSecurityGroupName'))]"
            ]
        },

        {
            "type": "Microsoft.Network/publicIPAddresses",
            "name": "[variables('MgmtPublicIpAddressName')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "publicIPAddressVersion": "IPv4",
                "publicIPAllocationMethod": "Static",
                "idleTimeoutInMinutes": 4,
                "dnsSettings": {
                    "domainNameLabel": "[variables('BpsSystemControllerDnsLabel')]",
                    "fqdn": "[concat(variables('BpsSystemControllerDnsLabel'),'.', resourceGroup().location,'.cloudapp.azure.com')]"
                }
            },
            "dependsOn": []
        },

        {
            "type": "Microsoft.Network/publicIPAddresses",
            "name": "[variables('BpsVirtualBlade1Eth0PublicIpAddressName')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "publicIPAddressVersion": "IPv4",
                "publicIPAllocationMethod": "Static",
                "idleTimeoutInMinutes": 4,
                "dnsSettings": {
                    "domainNameLabel": "[variables('BpsVirtualBlade1DnsLabel')]",
                    "fqdn": "[concat(variables('BpsVirtualBlade1DnsLabel'),'.', resourceGroup().location,'.cloudapp.azure.com')]"
                }
            },
            "dependsOn": []
        },

        {
            "type": "Microsoft.Network/publicIPAddresses",
            "name": "[variables('BpsVirtualBlade2Eth0PublicIpAddressName')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "publicIPAddressVersion": "IPv4",
                "publicIPAllocationMethod": "Static",
                "idleTimeoutInMinutes": 4,
                "dnsSettings": {
                    "domainNameLabel": "[variables('BpsVirtualBlade2DnsLabel')]",
                    "fqdn": "[concat(variables('BpsVirtualBlade2DnsLabel'),'.', resourceGroup().location,'.cloudapp.azure.com')]"
                }
            },
            "dependsOn": []
        },

        {
            "type": "Microsoft.Network/publicIPAddresses",
            "name": "[variables('BpsVirtualBlade3Eth0PublicIpAddressName')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "publicIPAddressVersion": "IPv4",
                "publicIPAllocationMethod": "Static",
                "idleTimeoutInMinutes": 4,
                "dnsSettings": {
                    "domainNameLabel": "[variables('BpsVirtualBlade3DnsLabel')]",
                    "fqdn": "[concat(variables('BpsVirtualBlade3DnsLabel'),'.', resourceGroup().location,'.cloudapp.azure.com')]"
                }
            },
            "dependsOn": []
        },

        {
            "type": "Microsoft.Network/publicIPAddresses",
            "name": "[variables('BpsVirtualBlade4Eth0PublicIpAddressName')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "publicIPAddressVersion": "IPv4",
                "publicIPAllocationMethod": "Static",
                "idleTimeoutInMinutes": 4,
                "dnsSettings": {
                    "domainNameLabel": "[variables('BpsVirtualBlade4DnsLabel')]",
                    "fqdn": "[concat(variables('BpsVirtualBlade4DnsLabel'),'.', resourceGroup().location,'.cloudapp.azure.com')]"
                }
            },
            "dependsOn": []
        },

        {
            "type": "Microsoft.Network/publicIPAddresses",
            "name": "[variables('BpsVirtualBlade5Eth0PublicIpAddressName')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "publicIPAddressVersion": "IPv4",
                "publicIPAllocationMethod": "Static",
                "idleTimeoutInMinutes": 4,
                "dnsSettings": {
                    "domainNameLabel": "[variables('BpsVirtualBlade5DnsLabel')]",
                    "fqdn": "[concat(variables('BpsVirtualBlade5DnsLabel'),'.', resourceGroup().location,'.cloudapp.azure.com')]"
                }
            },
            "dependsOn": []
        },

        {
            "type": "Microsoft.Network/publicIPAddresses",
            "name": "[variables('BpsVirtualBlade6Eth0PublicIpAddressName')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "publicIPAddressVersion": "IPv4",
                "publicIPAllocationMethod": "Static",
                "idleTimeoutInMinutes": 4,
                "dnsSettings": {
                    "domainNameLabel": "[variables('BpsVirtualBlade6DnsLabel')]",
                    "fqdn": "[concat(variables('BpsVirtualBlade6DnsLabel'),'.', resourceGroup().location,'.cloudapp.azure.com')]"
                }
            },
            "dependsOn": []
        },

        {
            "type": "Microsoft.Network/publicIPAddresses",
            "name": "[variables('BpsVirtualBlade7Eth0PublicIpAddressName')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "publicIPAddressVersion": "IPv4",
                "publicIPAllocationMethod": "Static",
                "idleTimeoutInMinutes": 4,
                "dnsSettings": {
                    "domainNameLabel": "[variables('BpsVirtualBlade7DnsLabel')]",
                    "fqdn": "[concat(variables('BpsVirtualBlade7DnsLabel'),'.', resourceGroup().location,'.cloudapp.azure.com')]"
                }
            },
            "dependsOn": []
        },

        {
            "type": "Microsoft.Network/publicIPAddresses",
            "name": "[variables('BpsVirtualBlade8Eth0PublicIpAddressName')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "publicIPAddressVersion": "IPv4",
                "publicIPAllocationMethod": "Static",
                "idleTimeoutInMinutes": 4,
                "dnsSettings": {
                    "domainNameLabel": "[variables('BpsVirtualBlade8DnsLabel')]",
                    "fqdn": "[concat(variables('BpsVirtualBlade8DnsLabel'),'.', resourceGroup().location,'.cloudapp.azure.com')]"
                }
            },
            "dependsOn": []
        },

        {
            "type": "Microsoft.Network/publicIPAddresses",
            "name": "[variables('BpsVirtualBlade9Eth0PublicIpAddressName')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "publicIPAddressVersion": "IPv4",
                "publicIPAllocationMethod": "Static",
                "idleTimeoutInMinutes": 4,
                "dnsSettings": {
                    "domainNameLabel": "[variables('BpsVirtualBlade9DnsLabel')]",
                    "fqdn": "[concat(variables('BpsVirtualBlade9DnsLabel'),'.', resourceGroup().location,'.cloudapp.azure.com')]"
                }
            },
            "dependsOn": []
        },

        {
            "type": "Microsoft.Network/publicIPAddresses",
            "name": "[variables('BpsVirtualBladeAEth0PublicIpAddressName')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "publicIPAddressVersion": "IPv4",
                "publicIPAllocationMethod": "Static",
                "idleTimeoutInMinutes": 4,
                "dnsSettings": {
                    "domainNameLabel": "[variables('BpsVirtualBladeADnsLabel')]",
                    "fqdn": "[concat(variables('BpsVirtualBladeADnsLabel'),'.', resourceGroup().location,'.cloudapp.azure.com')]"
                }
            },
            "dependsOn": []
        },

        {
            "type": "Microsoft.Network/publicIPAddresses",
            "name": "[variables('BpsVirtualBladeBEth0PublicIpAddressName')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "publicIPAddressVersion": "IPv4",
                "publicIPAllocationMethod": "Static",
                "idleTimeoutInMinutes": 4,
                "dnsSettings": {
                    "domainNameLabel": "[variables('BpsVirtualBladeBDnsLabel')]",
                    "fqdn": "[concat(variables('BpsVirtualBladeBDnsLabel'),'.', resourceGroup().location,'.cloudapp.azure.com')]"
                }
            },
            "dependsOn": []
        },

        {
            "type": "Microsoft.Network/publicIPAddresses",
            "name": "[variables('BpsVirtualBladeCEth0PublicIpAddressName')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "publicIPAddressVersion": "IPv4",
                "publicIPAllocationMethod": "Static",
                "idleTimeoutInMinutes": 4,
                "dnsSettings": {
                    "domainNameLabel": "[variables('BpsVirtualBladeCDnsLabel')]",
                    "fqdn": "[concat(variables('BpsVirtualBladeCDnsLabel'),'.', resourceGroup().location,'.cloudapp.azure.com')]"
                }
            },
            "dependsOn": []
        },

        {
            "type": "Microsoft.Compute/virtualMachines",
            "name": "[variables('BpsSystemControllerName')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "hardwareProfile": {
                    "vmSize": "[variables('BpsSystemControllerVmSize')]"
                },
                "storageProfile": {
                    "imageReference": {
                        "id": "[variables('BpsSystemControllerImageId')]"
                    },
                    "osDisk": {
                        "osType": "Linux",
                        "name": "[concat('disk_', variables('BpsSystemControllerName'))]",
                        "createOption": "[variables('BpsSystemControllerCreateOption')]",
                        "caching": "ReadWrite",
                        "diskSizeGB": "[variables('BpsSystemControllerDiskSizeGB')]"
                    },
                    "dataDisks": []
                },
				"osProfile": {
					"computerName": "[variables('BpsSystemControllerName')]",
					"adminUsername": "[variables('AdminUserName')]",
					"adminPassword": "[variables('AdminPassword')]",
					"linuxConfiguration": {
						"disablePasswordAuthentication": "[variables('BpsSystemControllerDisablePasswordAuthentication')]",
						"provisionVMAgent": "[variables('BpsSystemControllerProvisionVMAgent')]"
					}
				},
                "networkProfile": {
                    "networkInterfaces": [
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsSystemControllerEth0Name'))]",
                            "properties": {
                                "primary": true
                            }
                        }
                    ]
                },
                "diagnosticsProfile": {
                    "bootDiagnostics": {
                        "enabled": "[variables('BpsSystemControllerBootDiagnosticsEnabled')]",
                        "storageUri": "[concat('https', '://', variables('DiagnosticsStorageAccountName'), '.blob.core.windows.net', '/')]"
                    }
                }
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsSystemControllerEth0Name'))]"
            ]
        },        

        {
            "type": "Microsoft.Compute/virtualMachines",
            "name": "[variables('BpsVirtualBlade1Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
				"Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "hardwareProfile": {
                    "vmSize": "[variables('BpsVirtualBladeVmSize')]"
                },
                "storageProfile": {
                    "imageReference": {
                        "id": "[variables('BpsVirtualBladeImageId')]"
                    },
                    "osDisk": {
                        "osType": "Linux",
                        "name": "[concat('disk_', variables('BpsVirtualBlade1Name'))]",
                        "createOption": "[variables('BpsVirtualBladeCreateOption')]",
                        "caching": "ReadWrite",
                        "diskSizeGB": "[variables('BpsVirtualBladeDiskSizeGB')]"
                    },
                    "dataDisks": []
                },
				"osProfile": {
					"computerName": "[variables('BpsVirtualBlade1Name')]",
					"adminUsername": "[variables('AdminUserName')]",
					"adminPassword": "[variables('AdminPassword')]",
					"linuxConfiguration": {
						"disablePasswordAuthentication": "[variables('BpsVirtualBladeDisablePasswordAuthentication')]",
						"provisionVMAgent": "[variables('BpsVirtualBladeProvisionVMAgent')]"
					}
				},
                "networkProfile": {
                    "networkInterfaces": [
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade1Eth0Name'))]",
                            "properties": {
                                "primary": true
                            }
                        },
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade1Eth1Name'))]",
                            "properties": {
                                "primary": false
                            }
                        },
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade1Eth2Name'))]",
                            "properties": {
                                "primary": false
                            }
                        }
                    ]
                },
                "diagnosticsProfile": {
                    "bootDiagnostics": {
                        "enabled": "[variables('BpsVirtualBladeBootDiagnosticsEnabled')]",
                        "storageUri": "[concat('https', '://', variables('DiagnosticsStorageAccountName'), '.blob.core.windows.net', '/')]"
                    }
                }
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade1Eth0Name'))]",
                "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade1Eth1Name'))]",
                "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade1Eth2Name'))]"
            ]
        },
		
        {
            "type": "Microsoft.Compute/virtualMachines",
            "name": "[variables('BpsVirtualBlade2Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
				"Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "hardwareProfile": {
                    "vmSize": "[variables('BpsVirtualBladeVmSize')]"
                },
                "storageProfile": {
                    "imageReference": {
                        "id": "[variables('BpsVirtualBladeImageId')]"
                    },
                    "osDisk": {
                        "osType": "Linux",
                        "name": "[concat('disk_', variables('BpsVirtualBlade2Name'))]",
                        "createOption": "[variables('BpsVirtualBladeCreateOption')]",
                        "caching": "ReadWrite",
                        "diskSizeGB": "[variables('BpsVirtualBladeDiskSizeGB')]"
                    },
                    "dataDisks": []
                },
				"osProfile": {
					"computerName": "[variables('BpsVirtualBlade2Name')]",
					"adminUsername": "[variables('AdminUserName')]",
					"adminPassword": "[variables('AdminPassword')]",
					"linuxConfiguration": {
						"disablePasswordAuthentication": "[variables('BpsVirtualBladeDisablePasswordAuthentication')]",
						"provisionVMAgent": "[variables('BpsVirtualBladeProvisionVMAgent')]"
					}
				},
                "networkProfile": {
                    "networkInterfaces": [
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade2Eth0Name'))]",
                            "properties": {
                                "primary": true
                            }
                        },
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade2Eth1Name'))]",
                            "properties": {
                                "primary": false
                            }
                        },
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade2Eth2Name'))]",
                            "properties": {
                                "primary": false
                            }
                        }
                    ]
                },
                "diagnosticsProfile": {
                    "bootDiagnostics": {
                        "enabled": "[variables('BpsVirtualBladeBootDiagnosticsEnabled')]",
                        "storageUri": "[concat('https', '://', variables('DiagnosticsStorageAccountName'), '.blob.core.windows.net', '/')]"
                    }
                }
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade2Eth0Name'))]",
                "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade2Eth1Name'))]",
                "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade2Eth2Name'))]"
            ]
        },

        {
            "type": "Microsoft.Compute/virtualMachines",
            "name": "[variables('BpsVirtualBlade3Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "hardwareProfile": {
                    "vmSize": "[variables('BpsVirtualBladeVmSize')]"
                },
                "storageProfile": {
                    "imageReference": {
                        "id": "[variables('BpsVirtualBladeImageId')]"
                    },
                    "osDisk": {
                        "osType": "Linux",
                        "name": "[concat('disk_', variables('BpsVirtualBlade3Name'))]",
                        "createOption": "[variables('BpsVirtualBladeCreateOption')]",
                        "caching": "ReadWrite",
                        "diskSizeGB": "[variables('BpsVirtualBladeDiskSizeGB')]"
                    },
                    "dataDisks": []
                },
				"osProfile": {
					"computerName": "[variables('BpsVirtualBlade3Name')]",
					"adminUsername": "[variables('AdminUserName')]",
					"adminPassword": "[variables('AdminPassword')]",
					"linuxConfiguration": {
						"disablePasswordAuthentication": "[variables('BpsVirtualBladeDisablePasswordAuthentication')]",
						"provisionVMAgent": "[variables('BpsVirtualBladeProvisionVMAgent')]"
					}
				},
                "networkProfile": {
                    "networkInterfaces": [
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade3Eth0Name'))]",
                            "properties": {
                                "primary": true
                            }
                        },
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade3Eth1Name'))]",
                            "properties": {
                                "primary": false
                            }
                        },
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade3Eth2Name'))]",
                            "properties": {
                                "primary": false
                            }
                        }
                    ]
                },
                "diagnosticsProfile": {
                    "bootDiagnostics": {
                        "enabled": "[variables('BpsVirtualBladeBootDiagnosticsEnabled')]",
                        "storageUri": "[concat('https', '://', variables('DiagnosticsStorageAccountName'), '.blob.core.windows.net', '/')]"
                    }
                }
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade3Eth0Name'))]",
                "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade3Eth1Name'))]",
                "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade3Eth2Name'))]"
            ]
        },
		
        {
            "type": "Microsoft.Compute/virtualMachines",
            "name": "[variables('BpsVirtualBlade4Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "hardwareProfile": {
                    "vmSize": "[variables('BpsVirtualBladeVmSize')]"
                },
                "storageProfile": {
                    "imageReference": {
                        "id": "[variables('BpsVirtualBladeImageId')]"
                    },
                    "osDisk": {
                        "osType": "Linux",
                        "name": "[concat('disk_', variables('BpsVirtualBlade4Name'))]",
                        "createOption": "[variables('BpsVirtualBladeCreateOption')]",
                        "caching": "ReadWrite",
                        "diskSizeGB": "[variables('BpsVirtualBladeDiskSizeGB')]"
                    },
                    "dataDisks": []
                },
				"osProfile": {
					"computerName": "[variables('BpsVirtualBlade4Name')]",
					"adminUsername": "[variables('AdminUserName')]",
					"adminPassword": "[variables('AdminPassword')]",
					"linuxConfiguration": {
						"disablePasswordAuthentication": "[variables('BpsVirtualBladeDisablePasswordAuthentication')]",
						"provisionVMAgent": "[variables('BpsVirtualBladeProvisionVMAgent')]"
					}
                },
                "networkProfile": {
                    "networkInterfaces": [
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade4Eth0Name'))]",
                            "properties": {
                                "primary": true
                            }
                        },
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade4Eth1Name'))]",
                            "properties": {
                                "primary": false
                            }
                        },
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade4Eth2Name'))]",
                            "properties": {
                                "primary": false
                            }
                        }
                    ]
                },
                "diagnosticsProfile": {
                    "bootDiagnostics": {
                        "enabled": "[variables('BpsVirtualBladeBootDiagnosticsEnabled')]",
                        "storageUri": "[concat('https', '://', variables('DiagnosticsStorageAccountName'), '.blob.core.windows.net', '/')]"
                    }
                }
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade4Eth0Name'))]",
                "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade4Eth1Name'))]",
                "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade4Eth2Name'))]"
            ]
        },

        {
            "type": "Microsoft.Compute/virtualMachines",
            "name": "[variables('BpsVirtualBlade5Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
				"Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "hardwareProfile": {
                    "vmSize": "[variables('BpsVirtualBladeVmSize')]"
                },
                "storageProfile": {
                    "imageReference": {
                        "id": "[variables('BpsVirtualBladeImageId')]"
                    },
                    "osDisk": {
                        "osType": "Linux",
                        "name": "[concat('disk_', variables('BpsVirtualBlade5Name'))]",
                        "createOption": "[variables('BpsVirtualBladeCreateOption')]",
                        "caching": "ReadWrite",
                        "diskSizeGB": "[variables('BpsVirtualBladeDiskSizeGB')]"
                    },
                    "dataDisks": []
                },
				"osProfile": {
					"computerName": "[variables('BpsVirtualBlade5Name')]",
					"adminUsername": "[variables('AdminUserName')]",
					"adminPassword": "[variables('AdminPassword')]",
					"linuxConfiguration": {
						"disablePasswordAuthentication": "[variables('BpsVirtualBladeDisablePasswordAuthentication')]",
						"provisionVMAgent": "[variables('BpsVirtualBladeProvisionVMAgent')]"
					}
				},
                "networkProfile": {
                    "networkInterfaces": [
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade5Eth0Name'))]",
                            "properties": {
                                "primary": true
                            }
                        },
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade5Eth1Name'))]",
                            "properties": {
                                "primary": false
                            }
                        },
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade5Eth2Name'))]",
                            "properties": {
                                "primary": false
                            }
                        }
                    ]
                },
                "diagnosticsProfile": {
                    "bootDiagnostics": {
                        "enabled": "[variables('BpsVirtualBladeBootDiagnosticsEnabled')]",
                        "storageUri": "[concat('https', '://', variables('DiagnosticsStorageAccountName'), '.blob.core.windows.net', '/')]"
                    }
                }
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade5Eth0Name'))]",
                "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade5Eth1Name'))]",
                "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade5Eth2Name'))]"
            ]
        },
		
        {
            "type": "Microsoft.Compute/virtualMachines",
            "name": "[variables('BpsVirtualBlade6Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "hardwareProfile": {
                    "vmSize": "[variables('BpsVirtualBladeVmSize')]"
                },
                "storageProfile": {
                    "imageReference": {
                        "id": "[variables('BpsVirtualBladeImageId')]"
                    },
                    "osDisk": {
                        "osType": "Linux",
                        "name": "[concat('disk_', variables('BpsVirtualBlade6Name'))]",
                        "createOption": "[variables('BpsVirtualBladeCreateOption')]",
                        "caching": "ReadWrite",
                        "diskSizeGB": "[variables('BpsVirtualBladeDiskSizeGB')]"
                    },
                    "dataDisks": []
                },
				"osProfile": {
					"computerName": "[variables('BpsVirtualBlade6Name')]",
					"adminUsername": "[variables('AdminUserName')]",
					"adminPassword": "[variables('AdminPassword')]",
					"linuxConfiguration": {
						"disablePasswordAuthentication": "[variables('BpsVirtualBladeDisablePasswordAuthentication')]",
						"provisionVMAgent": "[variables('BpsVirtualBladeProvisionVMAgent')]"
					}
				},
                "networkProfile": {
                    "networkInterfaces": [
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade6Eth0Name'))]",
                            "properties": {
                                "primary": true
                            }
                        },
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade6Eth1Name'))]",
                            "properties": {
                                "primary": false
                            }
                        },
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade6Eth2Name'))]",
                            "properties": {
                                "primary": false
                            }
                        }
                    ]
                },
                "diagnosticsProfile": {
                    "bootDiagnostics": {
                        "enabled": "[variables('BpsVirtualBladeBootDiagnosticsEnabled')]",
                        "storageUri": "[concat('https', '://', variables('DiagnosticsStorageAccountName'), '.blob.core.windows.net', '/')]"
                    }
                }
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade6Eth0Name'))]",
                "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade6Eth1Name'))]",
                "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade6Eth2Name'))]"
            ]
        },

        {
            "type": "Microsoft.Compute/virtualMachines",
            "name": "[variables('BpsVirtualBlade7Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "hardwareProfile": {
                    "vmSize": "[variables('BpsVirtualBladeVmSize')]"
                },
                "storageProfile": {
                    "imageReference": {
                        "id": "[variables('BpsVirtualBladeImageId')]"
                    },
                    "osDisk": {
                        "osType": "Linux",
                        "name": "[concat('disk_', variables('BpsVirtualBlade7Name'))]",
                        "createOption": "[variables('BpsVirtualBladeCreateOption')]",
                        "caching": "ReadWrite",
                        "diskSizeGB": "[variables('BpsVirtualBladeDiskSizeGB')]"
                    },
                    "dataDisks": []
                },
				"osProfile": {
					"computerName": "[variables('BpsVirtualBlade7Name')]",
					"adminUsername": "[variables('AdminUserName')]",
					"adminPassword": "[variables('AdminPassword')]",
					"linuxConfiguration": {
						"disablePasswordAuthentication": "[variables('BpsVirtualBladeDisablePasswordAuthentication')]",
						"provisionVMAgent": "[variables('BpsVirtualBladeProvisionVMAgent')]"
					}
				},
                "networkProfile": {
                    "networkInterfaces": [
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade7Eth0Name'))]",
                            "properties": {
                                "primary": true
                            }
                        },
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade7Eth1Name'))]",
                            "properties": {
                                "primary": false
                            }
                        },
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade7Eth2Name'))]",
                            "properties": {
                                "primary": false
                            }
                        }
                    ]
                },
                "diagnosticsProfile": {
                    "bootDiagnostics": {
                        "enabled": "[variables('BpsVirtualBladeBootDiagnosticsEnabled')]",
                        "storageUri": "[concat('https', '://', variables('DiagnosticsStorageAccountName'), '.blob.core.windows.net', '/')]"
                    }
                }
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade7Eth0Name'))]",
                "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade7Eth1Name'))]",
                "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade7Eth2Name'))]"
            ]
        },
		
        {
            "type": "Microsoft.Compute/virtualMachines",
            "name": "[variables('BpsVirtualBlade8Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
			    "Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "hardwareProfile": {
                    "vmSize": "[variables('BpsVirtualBladeVmSize')]"
                },
                "storageProfile": {
                    "imageReference": {
                        "id": "[variables('BpsVirtualBladeImageId')]"
                    },
                    "osDisk": {
                        "osType": "Linux",
                        "name": "[concat('disk_', variables('BpsVirtualBlade8Name'))]",
                        "createOption": "[variables('BpsVirtualBladeCreateOption')]",
                        "caching": "ReadWrite",
                        "diskSizeGB": "[variables('BpsVirtualBladeDiskSizeGB')]"
                    },
                    "dataDisks": []
                },
				"osProfile": {
					"computerName": "[variables('BpsVirtualBlade8Name')]",
					"adminUsername": "[variables('AdminUserName')]",
					"adminPassword": "[variables('AdminPassword')]",
					"linuxConfiguration": {
						"disablePasswordAuthentication": "[variables('BpsVirtualBladeDisablePasswordAuthentication')]",
						"provisionVMAgent": "[variables('BpsVirtualBladeProvisionVMAgent')]"
					}
                },
                "networkProfile": {
                    "networkInterfaces": [
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade8Eth0Name'))]",
                            "properties": {
                                "primary": true
                            }
                        },
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade8Eth1Name'))]",
                            "properties": {
                                "primary": false
                            }
                        },
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade8Eth2Name'))]",
                            "properties": {
                                "primary": false
                            }
                        }
                    ]
                },
                "diagnosticsProfile": {
                    "bootDiagnostics": {
                        "enabled": "[variables('BpsVirtualBladeBootDiagnosticsEnabled')]",
                        "storageUri": "[concat('https', '://', variables('DiagnosticsStorageAccountName'), '.blob.core.windows.net', '/')]"
                    }
                }
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade8Eth0Name'))]",
                "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade8Eth1Name'))]",
                "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade8Eth2Name'))]"
            ]
        },

        {
            "type": "Microsoft.Compute/virtualMachines",
            "name": "[variables('BpsVirtualBlade9Name')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
				"Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "hardwareProfile": {
                    "vmSize": "[variables('BpsVirtualBladeVmSize')]"
                },
                "storageProfile": {
                    "imageReference": {
                        "id": "[variables('BpsVirtualBladeImageId')]"
                    },
                    "osDisk": {
                        "osType": "Linux",
                        "name": "[concat('disk_', variables('BpsVirtualBlade9Name'))]",
                        "createOption": "[variables('BpsVirtualBladeCreateOption')]",
                        "caching": "ReadWrite",
                        "diskSizeGB": "[variables('BpsVirtualBladeDiskSizeGB')]"
                    },
                    "dataDisks": []
                },
				"osProfile": {
					"computerName": "[variables('BpsVirtualBlade9Name')]",
					"adminUsername": "[variables('AdminUserName')]",
					"adminPassword": "[variables('AdminPassword')]",
					"linuxConfiguration": {
						"disablePasswordAuthentication": "[variables('BpsVirtualBladeDisablePasswordAuthentication')]",
						"provisionVMAgent": "[variables('BpsVirtualBladeProvisionVMAgent')]"
					}
				},
                "networkProfile": {
                    "networkInterfaces": [
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade9Eth0Name'))]",
                            "properties": {
                                "primary": true
                            }
                        },
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade9Eth1Name'))]",
                            "properties": {
                                "primary": false
                            }
                        },
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade9Eth2Name'))]",
                            "properties": {
                                "primary": false
                            }
                        }
                    ]
                },
                "diagnosticsProfile": {
                    "bootDiagnostics": {
                        "enabled": "[variables('BpsVirtualBladeBootDiagnosticsEnabled')]",
                        "storageUri": "[concat('https', '://', variables('DiagnosticsStorageAccountName'), '.blob.core.windows.net', '/')]"
                    }
                }
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade9Eth0Name'))]",
                "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade9Eth1Name'))]",
                "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBlade9Eth2Name'))]"
            ]
        },
		
        {
            "type": "Microsoft.Compute/virtualMachines",
            "name": "[variables('BpsVirtualBladeAName')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
				"Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "hardwareProfile": {
                    "vmSize": "[variables('BpsVirtualBladeVmSize')]"
                },
                "storageProfile": {
                    "imageReference": {
                        "id": "[variables('BpsVirtualBladeImageId')]"
                    },
                    "osDisk": {
                        "osType": "Linux",
                        "name": "[concat('disk_', variables('BpsVirtualBladeAName'))]",
                        "createOption": "[variables('BpsVirtualBladeCreateOption')]",
                        "caching": "ReadWrite",
                        "diskSizeGB": "[variables('BpsVirtualBladeDiskSizeGB')]"
                    },
                    "dataDisks": []
                },
				"osProfile": {
					"computerName": "[variables('BpsVirtualBladeAName')]",
					"adminUsername": "[variables('AdminUserName')]",
					"adminPassword": "[variables('AdminPassword')]",
					"linuxConfiguration": {
						"disablePasswordAuthentication": "[variables('BpsVirtualBladeDisablePasswordAuthentication')]",
						"provisionVMAgent": "[variables('BpsVirtualBladeProvisionVMAgent')]"
					}
				},
                "networkProfile": {
                    "networkInterfaces": [
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBladeAEth0Name'))]",
                            "properties": {
                                "primary": true
                            }
                        },
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBladeAEth1Name'))]",
                            "properties": {
                                "primary": false
                            }
                        },
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBladeAEth2Name'))]",
                            "properties": {
                                "primary": false
                            }
                        }
                    ]
                },
                "diagnosticsProfile": {
                    "bootDiagnostics": {
                        "enabled": "[variables('BpsVirtualBladeBootDiagnosticsEnabled')]",
                        "storageUri": "[concat('https', '://', variables('DiagnosticsStorageAccountName'), '.blob.core.windows.net', '/')]"
                    }
                }
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBladeAEth0Name'))]",
                "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBladeAEth1Name'))]",
                "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBladeAEth2Name'))]"
            ]
        },

        {
            "type": "Microsoft.Compute/virtualMachines",
            "name": "[variables('BpsVirtualBladeBName')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
				"Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "hardwareProfile": {
                    "vmSize": "[variables('BpsVirtualBladeVmSize')]"
                },
                "storageProfile": {
                    "imageReference": {
                        "id": "[variables('BpsVirtualBladeImageId')]"
                    },
                    "osDisk": {
                        "osType": "Linux",
                        "name": "[concat('disk_', variables('BpsVirtualBladeBName'))]",
                        "createOption": "[variables('BpsVirtualBladeCreateOption')]",
                        "caching": "ReadWrite",
                        "diskSizeGB": "[variables('BpsVirtualBladeDiskSizeGB')]"
                    },
                    "dataDisks": []
                },
				"osProfile": {
					"computerName": "[variables('BpsVirtualBladeBName')]",
					"adminUsername": "[variables('AdminUserName')]",
					"adminPassword": "[variables('AdminPassword')]",
					"linuxConfiguration": {
						"disablePasswordAuthentication": "[variables('BpsVirtualBladeDisablePasswordAuthentication')]",
						"provisionVMAgent": "[variables('BpsVirtualBladeProvisionVMAgent')]"
					}
				},
                "networkProfile": {
                    "networkInterfaces": [
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBladeBEth0Name'))]",
                            "properties": {
                                "primary": true
                            }
                        },
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBladeBEth1Name'))]",
                            "properties": {
                                "primary": false
                            }
                        },
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBladeBEth2Name'))]",
                            "properties": {
                                "primary": false
                            }
                        }
                    ]
                },
                "diagnosticsProfile": {
                    "bootDiagnostics": {
                        "enabled": "[variables('BpsVirtualBladeBootDiagnosticsEnabled')]",
                        "storageUri": "[concat('https', '://', variables('DiagnosticsStorageAccountName'), '.blob.core.windows.net', '/')]"
                    }
                }
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBladeBEth0Name'))]",
                "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBladeBEth1Name'))]",
                "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBladeBEth2Name'))]"
            ]
        },
		
        {
            "type": "Microsoft.Compute/virtualMachines",
            "name": "[variables('BpsVirtualBladeCName')]",
            "apiVersion": "[variables('apiVersion')]",
            "location": "[resourceGroup().location]",
            "scale": null,
			"tags": {
				"Owner": "[variables('UserEmailTag')]",
				"Project": "[variables('UserProjectTag')]",
			    "Options": "[variables('UserOptionsTag')]",
				"ResourceGroup": "[resourceGroup().name]",
				"Location": "[resourceGroup().location]"
			},
            "properties": {
                "hardwareProfile": {
                    "vmSize": "[variables('BpsVirtualBladeVmSize')]"
                },
                "storageProfile": {
                    "imageReference": {
                        "id": "[variables('BpsVirtualBladeImageId')]"
                    },
                    "osDisk": {
                        "osType": "Linux",
                        "name": "[concat('disk_', variables('BpsVirtualBladeCName'))]",
                        "createOption": "[variables('BpsVirtualBladeCreateOption')]",
                        "caching": "ReadWrite",
                        "diskSizeGB": "[variables('BpsVirtualBladeDiskSizeGB')]"
                    },
                    "dataDisks": []
                },
				"osProfile": {
					"computerName": "[variables('BpsVirtualBladeCName')]",
					"adminUsername": "[variables('AdminUserName')]",
					"adminPassword": "[variables('AdminPassword')]",
					"linuxConfiguration": {
						"disablePasswordAuthentication": "[variables('BpsVirtualBladeDisablePasswordAuthentication')]",
						"provisionVMAgent": "[variables('BpsVirtualBladeProvisionVMAgent')]"
					}
				},
                "networkProfile": {
                    "networkInterfaces": [
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBladeCEth0Name'))]",
                            "properties": {
                                "primary": true
                            }
                        },
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBladeCEth1Name'))]",
                            "properties": {
                                "primary": false
                            }
                        },
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBladeCEth2Name'))]",
                            "properties": {
                                "primary": false
                            }
                        }
                    ]
                },
                "diagnosticsProfile": {
                    "bootDiagnostics": {
                        "enabled": "[variables('BpsVirtualBladeBootDiagnosticsEnabled')]",
                        "storageUri": "[concat('https', '://', variables('DiagnosticsStorageAccountName'), '.blob.core.windows.net', '/')]"
                    }
                }
            },
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBladeCEth0Name'))]",
                "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBladeCEth1Name'))]",
                "[resourceId('Microsoft.Network/networkInterfaces', variables('BpsVirtualBladeCEth2Name'))]"
            ]
        }
    ]
}
